/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={13:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artists.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые исполнители"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(c(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>  \n\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"loved"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")},usePartial:!0,useData:!0})},14:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["albums_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"album"),e,{name:"album",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--albums">\n    <h1 class="section__title">'+c(a(null!=e?u(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+c(a(null!=e?u(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=u(r,"each").call(null!=e?e:t.nullContext||{},null!=e?u(e,"albums"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},35:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["tracks.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"recent"):e,href_all:"#",title:"Недавно прослушанные"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},5:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(c(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recent"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"loved"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")},usePartial:!0,useData:!0})},67:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["albums.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"albums-section"),e,{name:"albums-section",hash:{albums:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(c(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"loved"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")},usePartial:!0,useData:!0})},110:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["album-card.hbs"]=t({1:function(t,e,r,n,o){return"            <img\n                class='album-card__like'\n                src='/static/img/like-active.svg'\n                alt='like'\n            />\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='album-card'>\n    <a href='"+c(a(null!=e?u(e,"album_page"):e,e))+"' style='cursor: not-allowed;'>\n        <img src='"+c(a(null!=e?u(e,"thumbnail_url"):e,e))+"' alt='' class='album-card__img' />\n        <span class='album-card__title'>"+c(a(null!=e?u(e,"title"):e,e))+"</span>\n        <a href='"+c(a(null!=(i=null!=(i=null!=e?u(e,"artists"):e)?u(i,"0"):i)?u(i,"artist_page"):i,e))+"' class='album-card__artist'>"+c(a(null!=(i=null!=(i=null!=e?u(e,"artists"):e)?u(i,"0"):i)?u(i,"title"):i,e))+"</a>\n"+(null!=(i=u(r,"if").call(null!=e?e:t.nullContext||{},null!=e?u(e,"isLiked"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:8},end:{line:12,column:15}}}))?i:"")+"    </a>\n</div>"},useData:!0})},150:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["music-card.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='music-card "+c(a(null!=e?u(e,"classes"):e,e))+'\'>\n    <div class="music-card__wrapper" id="track" data-id="'+c(a(null!=e?u(e,"id"):e,e))+"\">\n        <img src='"+c(a(null!=e?u(e,"thumbnail_url"):e,e))+"' alt='' class='music-card__img' />\n        <img src=\"/static/img/play.svg\" class=\"music-card__play\">\n    </div>\n    <span class='music-card__title'>"+c(a(null!=e?u(e,"title"):e,e))+'</span>\n    <a href="'+c(a(null!=(i=null!=(i=null!=e?u(e,"artists"):e)?u(i,"0"):i)?u(i,"artist_page"):i,e))+"\" class='music-card__artist'>"+c(a(null!=(i=null!=(i=null!=e?u(e,"artists"):e)?u(i,"0"):i)?u(i,"title"):i,e))+"</a>\n</div>"},useData:!0})},202:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artist-card.hbs"]=t({1:function(t,e,r,n,o){return"            <img\n                class='artist-card__like'\n                src='/static/img/like-active.svg'\n                alt='like'\n            />\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='artist-card'>\n    <a href='"+c(a(null!=e?u(e,"artist_page"):e,e))+"' >\n        <img class='artist-card__img' src='"+c(a(null!=e?u(e,"thumbnail_url"):e,e))+"' alt='artist' />\n        <span class='artist-card__name'>"+c(a(null!=e?u(e,"title"):e,e))+"</span>\n"+(null!=(i=u(r,"if").call(null!=e?e:t.nullContext||{},null!=e?u(e,"isFollowed"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:11,column:15}}}))?i:"")+"    </a>\n</div>"},useData:!0})},221:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["collections.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){return'<div class=\'collections-container section__content\'>\n    <div>\n        <button class="collections-container__favourite">\n        </button>\n        <span>Самое любимое</span>\n    </div>\n\n    <div>\n        <button class="collections-container__popular">\n        </button>\n        <span>Популярное</span>\n    </div>\n\n    <div>\n        <button class="collections-container__new">\n        </button>\n        <span>Новинки</span>\n    </div>\n\n    <div>\n        <button class="collections-container__week">\n        </button>\n        <span>Открытия недели</span>\n    </div>\n\n    <div>\n        <button class="collections-container__top">\n        </button>\n        <span>Топ чарт</span>\n    </div>\n</div>'},useData:!0})},301:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["playlists.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'    <li class="item">\n        <a href="'+c(a(null!=e?u(e,"href"):e,e))+'">\n            <img src="'+c(a(null!=e?u(e,"img"):e,e))+'" alt="playlist #'+c("function"==typeof(i=null!=(i=u(r,"index")||o&&u(o,"index"))?i:t.hooks.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"index",hash:{},data:o,loc:{start:{line:8,column:51},end:{line:8,column:61}}}):i)+'">\n        </a>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<ul id="playlists-list">\n    <button class="playlist-add" style="cursor: not-allowed;">\n        <img src="../../static/img/plus.svg">\n    </button>\n'+(null!=(i=a(r,"each").call(null!=e?e:t.nullContext||{},null!=e?a(e,"playlists"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:4},end:{line:10,column:13}}}))?i:"")+"</ul>\n"},useData:!0})},437:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["header.hbs"]=t({1:function(t,e,r,n,o){var i=t.lambda,a=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'                    <li class="item">\n                        <a href="'+a(i(null!=e?c(e,"href"):e,e))+'">\n                            <img class="header__icon" src="'+a(i(null!=e?c(e,"icon"):e,e))+'">\n                            <span class="header__span">'+a(i(null!=e?c(e,"text"):e,e))+"</span>\n                        </a>\n                    </li>\n"},3:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'        <div class="header__profile">\n            <img class="profile__img" src="'+c(a(null!=(i=null!=e?u(e,"user"):e)?u(i,"avatar"):i,e))+'" alt="profile">\n            <div class="profile__dropdown">\n                <span class="profile__user">'+c(a(null!=(i=null!=e?u(e,"user"):e)?u(i,"username"):i,e))+'</span>\n                <a href="/profile">Профиль</a>\n                <a href="/profile/settings">Настройки</a>\n                <a href="/logout">Выйти</a>\n            </div>\n        </div>\n'},5:function(t,e,r,n,o){return'        <div class="header__auth">\n            <a class="btn" href="#login">Войти</a>\n            <a class="btn" href="#register">Регистрация</a>\n        </div>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="header__logo-container">\n    <a class="header__logo">\n        <img class="logo" src="/static/img/logo.png" alt="logo">\n    </a>\n</div>\n\n<div class="header__main">\n    <form class="header__search" onsubmit="return false;">\n        <img class="search-icon" src="static/img/icon-search.svg">\n        <input type="text" id="search" name="search" placeholder="поиск...">\n    </form>\n    <nav class="header__nav">\n        <ul class="header-list">\n'+(null!=(i=c(r,"each").call(a,null!=e?c(e,"navItems"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:16},end:{line:21,column:25}}}))?i:"")+"        </ul>\n    </nav>\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"user"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.program(5,o,0),data:o,loc:{start:{line:24,column:4},end:{line:39,column:11}}}))?i:"")+"</div>\n"},useData:!0})},481:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artist.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"albums"):e,href_all:"#",title:"Популярные альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"tracks"):e,href_all:"#",title:"Популярные альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="artist__info">\n    <img class="artist__info__img" src="'+c(a(null!=(i=null!=e?l(e,"artist"):e)?l(i,"thumbnail_url"):i,e))+'" alt="error loading avatar">\n    <div>\n        <span class="artist__info__type">Исполнитель</span>\n        <h2 class="artist__info__username">'+c(a(null!=(i=null!=e?l(e,"artist"):e)?l(i,"title"):i,e))+'</h2>\n        <span class="artist__info__stats">'+c(a(null!=(i=null!=e?l(e,"stats"):e)?l(i,"listeners"):i,e))+' слушателей за месяц</span>\n        <div class="artist__info__actions">\n            <img class="artist__info__actions__play" src="/static/img/play.svg" alt="edit">\n            <button class="artist__info__actions__subscribe btn">Подписаться</button>\n        </div>\n    </div>\n</div>\n\n'+(null!=(i=l(r,"if").call(u,null!=e?l(e,"albums"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(u,null!=e?l(e,"tracks"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?i:"")},usePartial:!0,useData:!0})},520:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["album.hbs"]=t({1:function(t,e,r,n,o){return"album_norder"},3:function(t,e,r,n,o){return'        <img src="/static/img/pause.svg" alt="pause" class="album__play">\n'},5:function(t,e,r,n,o){return'        <img src="/static/img/play.svg" alt="play" class="album__play">\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lambda,u=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="album '+(null!=(i=l(r,"unless").call(a,null!=e?l(e,"ind"):e,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:1,column:18},end:{line:1,column:61}}}))?i:"")+'">\n    <span class="album__index">'+u(c(null!=e?l(e,"ind"):e,e))+'</span>\n    <img src="'+u(c(null!=e?l(e,"thumbnail_url"):e,e))+'" alt="" class="album__img">\n    <a href="'+u(c(null!=e?l(e,"album_page"):e,e))+'" style="cursor: not-allowed;" class="album__title">'+u(c(null!=e?l(e,"title"):e,e))+'</a>\n    <a href="'+u(c(null!=(i=null!=(i=null!=e?l(e,"artists"):e)?l(i,"0"):i)?l(i,"artist_page"):i,e))+'" class="album__artist">\n        '+u(c(null!=(i=null!=(i=null!=e?l(e,"artists"):e)?l(i,"0"):i)?l(i,"title"):i,e))+'\n    </a>\n    <span class="album__description">'+u(c(null!=e?l(e,"description"):e,e))+"</span>\n    \n"+(null!=(i=l(r,"if").call(a,null!=e?l(e,"isPlaying"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.program(5,o,0),data:o,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))?i:"")+"</div>\n"},useData:!0})},561:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["profile.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'            <div class="profile__info__stats">\n                <span>'+c(a(null!=(i=null!=e?u(e,"stats"):e)?u(i,"minutes"):i,e))+" минут прослушано</span>\n                <span>"+c(a(null!=(i=null!=e?u(e,"stats"):e)?u(i,"tracks"):i,e))+" треков услышано</span>\n                <span>"+c(a(null!=(i=null!=e?u(e,"stats"):e)?u(i,"artists"):i,e))+" артистов изучено</span>\n            </div>\n"},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"playlists"):e,href_all:"#",title:"Плейлисты"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},5:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"tracks"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},7:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"artists"):e,href_all:"#",title:"Любимые исполнители"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="profile__info">\n    <img class="profile__info__img" src="'+c(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"avatar"):i,e))+'" alt="error loading avatar">\n    <div>\n        <h2 class="profile__info__username">'+c(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"username"):i,e))+'</h2>\n        <img class="profile__info__actions" src="/static/img/dots.svg" alt="edit">\n'+(null!=(i=l(r,"if").call(u,null!=e?l(e,"stats"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:8},end:{line:12,column:15}}}))?i:"")+"    </div>\n</div>\n\n"+(null!=(i=l(r,"if").call(u,null!=e?l(e,"playlists"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:16,column:0},end:{line:18,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(u,null!=e?l(e,"tracks"):e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o,loc:{start:{line:20,column:0},end:{line:22,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(u,null!=e?l(e,"artists"):e,{name:"if",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o,loc:{start:{line:24,column:0},end:{line:26,column:7}}}))?i:"")},usePartial:!0,useData:!0})},567:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["auth.hbs"]=t({1:function(t,e,r,n,o){var i=t.lambda,a=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"            <div class='auth-main__input-container'>\n                <div class='auth-main__input-container'>\n                    <div class=\"auth-form__span-container\">\n                        <span>"+a(i(null!=e?c(e,"text"):e,e))+"</span>\n                    </div>\n                    <input\n                        type='"+a(i(null!=e?c(e,"type"):e,e))+"'\n                        placeholder='"+a(i(null!=e?c(e,"placeholder"):e,e))+"'\n                        name='"+a(i(null!=e?c(e,"name"):e,e))+"'\n                        class='auth-form__base-input'\n                        required\n                    />\n                </div>\n                <p class='error-message' name='"+a(i(null!=e?c(e,"errorName"):e,e))+"'></p>\n            </div>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a,c=t.escapeExpression,u=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div id='auth' class='auth-main'>\n        <p>"+c(t.lambda(null!=e?l(e,"header"):e,e))+"</p>\n        <div class='auth-main__line'></div>\n\n"+(null!=(i=l(r,"each").call(u,null!=e?l(e,"inputs"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:21,column:17}}}))?i:"")+"\n        <p class='error-message' name='global-error'></p>\n        <input type='submit' value='"+c("function"==typeof(a=null!=(a=l(r,"submitText")||(null!=e?l(e,"submitText"):e))?a:t.hooks.helperMissing)?a.call(u,{name:"submitText",hash:{},data:o,loc:{start:{line:24,column:36},end:{line:24,column:50}}}):a)+"' class='auth-form__submit-btn' />\n    </div>"},useData:!0})},704:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e;e=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["track.hbs"]=e({1:function(t,e,r,n,o){return"track_norder"},3:function(t,e,r,n,o){return'        <img src="/static/img/like-active.svg" alt="like" class="track__like">\n'},5:function(t,e,r,n,o){return'        <img src="/static/img/like-default.svg" alt="unlike" class="track__like">\n'},compiler:[8,">= 4.3.0"],main:function(e,r,n,o,i){var a,c,u=null!=r?r:e.nullContext||{},l=e.hooks.helperMissing,s="function",f=e.escapeExpression,h=e.lambda,p=e.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="track '+(null!=(a=p(n,"unless").call(u,null!=r?p(r,"id"):r,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:60}}}))?a:"")+'">\n    <span class="track__index">'+f(t(c=null!=(c=p(n,"index")||(null!=r?p(r,"index"):r))?c:l)===s?c.call(u,{name:"index",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:40}}}):c)+'</span>\n    <div class="track__wrapper" id="track" data-id="'+f(h(null!=r?p(r,"id"):r,r))+'">\n        <img src="'+f(t(c=null!=(c=p(n,"thumbnail_url")||(null!=r?p(r,"thumbnail_url"):r))?c:l)===s?c.call(u,{name:"thumbnail_url",hash:{},data:i,loc:{start:{line:4,column:18},end:{line:4,column:35}}}):c)+'" alt="" class="track__img">\n        <img src="/static/img/play.svg" class="track__play">\n    </div>\n    <a style="cursor: not-allowed;" href="'+f(h(null!=r?p(r,"hrefAlbum"):r,r))+'" class="track__title">'+f(h(null!=r?p(r,"title"):r,r))+'</a>\n    <a href="'+f(h(null!=(a=null!=(a=null!=r?p(r,"artists"):r)?p(a,"0"):a)?p(a,"artist_page"):a,r))+'" class="track__artist">'+f(h(null!=(a=null!=(a=null!=r?p(r,"artists"):r)?p(a,"0"):a)?p(a,"title"):a,r))+'</a>\n    <a style="cursor: not-allowed;" href="'+f(h(null!=r?p(r,"hrefAlbum"):r,r))+'" class="track__album">'+f(h(null!=r?p(r,"album"):r,r))+'</a>\n    <span class="track__duration">'+f(h(null!=r?p(r,"duration"):r,r))+"</span>\n"+(null!=(a=p(n,"if").call(u,null!=r?p(r,"isLiked"):r,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))?a:"")+'    <img src="/static/img/dots.svg" alt="more" class="track__actions">\n</div>\n'},useData:!0})},767:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["bottomPlayer.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){return'<div class="player__container">\n    <div class="player__song-container">\n        <div class="player__song" id="song-container">\n            <img id="song-img">\n            <div class="player__song-text">\n                <span id="song-name" class="song-name">nothing</span>\n                <span id="artist-name" class="artist-name">nothing</span>\n            </div>\n        </div>\n        <img src="/static/img/like-default.svg" class="icon" alt="Like">\n        <img src="/static/img/dots.svg" class="icon" alt="Menu">\n    </div>\n\n    <div class="player__widgets">\n        <div class="player__controls">\n            <img src="/static/img/player-shuffle.svg" class="icon" id="shuffle" alt="Shuffle">\n            <img src="/static/img/player-prev.svg" class="icon" id="prev" alt="Prev">\n            <img src="/static/img/player-play.svg" class="icon" id="play" alt="Play">\n            <img src="/static/img/player-next.svg" class="icon" id="next" alt="Next">\n            <img src="/static/img/player-repeat.svg" class="icon" id="repeat" alt="Repeat">\n        </div>\n        <div class="player__progress-container">\n            <span id="current-span">0:00</span>\n            <div class="rectangle" id="play-progress">\n                <div class="rectangle-prev"></div>\n                <div class="circle"></div>\n            </div>\n            <span id="end-span">0:00</span>\n        </div>\n    </div>\n\n    <div class="player__tools">\n        <img class="icon" src="/static/img/volume.svg" alt="Volume">\n        <div class="rectangle-volume" id="volume-progress">\n            <div class="rectangle-prev"></div>\n            <div class="circle"></div>\n        </div>\n        <img class="icon" src="/static/img/resize.svg" alt="Fullscreen">\n    </div>\n</div>\n'},useData:!0})},806:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["musics_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"music-card"),e,{name:"music-card",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--musics">\n    <h1 class="section__title">'+c(a(null!=e?u(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+c(a(null!=e?u(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=u(r,"each").call(null!=e?e:t.nullContext||{},null!=e?u(e,"musics"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},830:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["tracks_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(u(n,"track"),e,{name:"track",hash:{duration:(u(r,"convertDuration")||e&&u(e,"convertDuration")||c).call(a,null!=e?u(e,"duration"):e,{name:"convertDuration",hash:{},data:o,loc:{start:{line:6,column:52},end:{line:6,column:83}}}),index:(u(r,"add")||e&&u(e,"add")||c).call(a,o&&u(o,"index"),1,{name:"add",hash:{},data:o,loc:{start:{line:6,column:28},end:{line:6,column:42}}})},data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--tracks">\n    <h1 class="section__title">'+c(a(null!=e?u(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+c(a(null!=e?u(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=u(r,"each").call(null!=e?e:t.nullContext||{},null!=e?u(e,"tracks"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},861:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["main.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"recent"):e,href_all:"#",title:"Недавно прослушанные"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},5:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},7:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"bottom-player"),e,{name:"bottom-player",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(c(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recent"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"loved"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")+"\n"+(null!=(i=c(r,"if").call(a,null!=e?c(e,"showBottomPlayer"):e,{name:"if",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?i:"")+"\n"},usePartial:!0,useData:!0})},986:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artists_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artist-card"),e,{name:"artist-card",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,c=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--artists">\n    <h1 class="section__title">'+c(a(null!=e?u(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+c(a(null!=e?u(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=u(r,"each").call(null!=e?e:t.nullContext||{},null!=e?u(e,"artists"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var l=function(){function t(e,r){o(this,t),this._path=e,r&&(this._build=r)}return a(t,[{key:"_build",value:function(t){throw new Error("Not implemented")}},{key:"math",value:function(e){return e.match(this._path+t.path_append)}},{key:"build",value:function(t){var e=this._build(t);if(!this.math(e))throw new Error('Route "'.concat(this._path,'" does not match builded "').concat(e,'"'));return e}},{key:"path",get:function(){return this._path}},{key:"toString",value:function(){return this._path}}])}();c(l,"path_append","(?!\\w)");var s=function(){return a((function t(){var e=this;o(this,t),c(this,"_href","http://null.null/"),c(this,"_callbacks",new Map),this._href=location.href,window.addEventListener("popstate",(function(t){e.setUrl(location.href)}))}),[{key:"setUrl",value:function(t){var e=this.getRoute();this._href=t,this.callCallbacks(e,this.getRoute())}},{key:"addCallback",value:function(t,e){console.log('Adding callback "'.concat(e.constructor.name,'" for ').concat(t)),this._callbacks.set(t,this._callbacks.get(t)||[]),this._callbacks.get(t).push(e)}},{key:"removeCallback",value:function(t,e){console.log('Removing callback "'.concat(e.constructor.name,'" for ').concat(t)),this._callbacks.set(t,this._callbacks.get(t).filter((function(t){return t!==e}))),0===this._callbacks.get(t).length&&this._callbacks.delete(t)}},{key:"callCallback",value:function(t,e){var r,n=this,o=null!==(r=t.math(this.getRoute()))&&void 0!==r?r:[""];console.log("Matching ".concat(t," with ").concat(this._href," got ").concat(o," [callCallback]")),setTimeout((function(){return e.onRoute({route:t,params:o,searchParams:n.getSearch(),data:history.state})}))}},{key:"callCallbacks",value:function(t,r){var n,o=this,i=function(t){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this._callbacks.entries());try{var a=function(){var i,a,c=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.value,2),u=c[0],l=c[1],s=null!==(i=u.math(t))&&void 0!==i?i:[""],f=null!==(a=u.math(r))&&void 0!==a?a:[""];console.log("Matching ".concat(u," with ").concat(o._href," got ").concat(f," [callCallbacks]")),s[0]!==f[0]&&l.forEach((function(t){return setTimeout((function(){return t.onRoute({route:u,params:f,searchParams:o.getSearch(),data:history.state})}))}))};for(i.s();!(n=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}},{key:"pushUrl",value:function(t,e){t=new URL(t,this._href).href,history.pushState(e,"",t),this.setUrl(t)}},{key:"replaceUrl",value:function(t,e){t=new URL(t,this._href).href,history.replaceState(e,"",t),this.setUrl(t)}},{key:"joinUrl",value:function(t,e){this.pushUrl(new URL(t,this._href).href,e)}},{key:"getRoute",value:function(){return this._href.match(/\/\/.*?(\/.*)/)[1]}},{key:"getPath",value:function(){return new URL(this._href).pathname}},{key:"getSearch",value:function(){return new URL(this._href).searchParams}},{key:"getHash",value:function(){return new URL(this._href).hash}}])}();const f=new s;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}var v=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.callbacks=[]},(e=[{key:"addCallback",value:function(t){this.callbacks.push(t),console.log("Added callback [".concat(t,"] to ").concat(this.constructor.name,", total: [").concat(this.callbacks,"]"))}},{key:"removeCallbacks",value:function(t){this.callbacks=this.callbacks.filter((function(e){return-1===t.indexOf(e)})),console.log("Removed [".concat(t,"] callbacks from ").concat(this.constructor.name,", left: [").concat(this.callbacks,"]"))}},{key:"setState",value:function(t){var e=this;console.log("Set state from ".concat(this.value," to ").concat(t));var r=this.value;this.value=t,this.callbacks.slice().reverse().forEach((function(t){console.log('Calling callback "'.concat(t,'" for ').concat(e.constructor.name)),t(e,r,e.value)}))}},{key:"getState",value:function(){return this.value}}])&&p(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return _(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function P(t,e,r){return e&&x(t.prototype,e),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var j,L,S=function(){return P((function t(){O(this,t),this._element=this.constructor.BASE_ELEMENT_FUNCTION(),this._element.rzf_component=this,console.log("Created component ".concat(this.constructor.name)),this.states=new Map,this.init.apply(this,arguments),this.build()}),[{key:"element",get:function(){return this._element}},{key:"createState",value:function(t){var e=this;console.log("Created state for ".concat(this.constructor.name));var r=new v(t);return this.createCallback(r,(function(t,r,n){return e.render(t,r,n)})),r}},{key:"createCallback",value:function(t,e){console.log('Created callback "'.concat(e,'" on ').concat(t.constructor.name," for ").concat(this.constructor.name)),this.states.set(t,this.states.get(t)||[]),this.states.get(t).push(e),t.addCallback(e)}},{key:"destroy",value:function(){console.log("Destroying component ".concat(this.constructor.name)),this._element.remove();var t,e=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=k(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(this.states.entries());try{for(e.s();!(t=e.n()).done;){var r=w(t.value,2),n=r[0],o=r[1];console.log("Removing [".concat(o,"] callbacks from ").concat(n.constructor.name," for ").concat(this.constructor.name)),n.removeCallbacks(o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"init",value:function(){}},{key:"build",value:function(){}},{key:"render",value:function(t,e,r){}}],[{key:"BASE_ELEMENT_FUNCTION",value:function(){return document.createElement(this.BASE_ELEMENT)}}])}();j=S,(L=E(L="BASE_ELEMENT"))in j?Object.defineProperty(j,L,{value:"div",enumerable:!0,configurable:!0,writable:!0}):j[L]="div";var T=function(t){function e(){var t;return O(this,e),(t=function(t,e,r){return e=b(e),function(t,e){if(e&&("object"==d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r))}(this,e)).observer=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.removedNodes.forEach((function(t){t.rzf_component&&t.rzf_component.destroy()}))}))})),t.observer.observe(t.element,{childList:!0,subtree:!0}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(e,t),P(e,null,[{key:"BASE_ELEMENT_FUNCTION",value:function(){var t;return null!==(t=document.getElementById("root"))&&void 0!==t?t:function(){throw new Error("Root element not found")}()}}])}(S),H={pageRoute:new l("^/(tracks|albums|artists|profile|settings|)"),artistsRoute:new l("^/artists/([0-9]+)|^/artists",(function(t){return"/artists/".concat(t.artist_id)})),authRoute:new l("#(login|register)"),logoutRoute:new l("/logout")};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(){A=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==C(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function M(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,c,"next",t)}function c(t){M(i,n,o,a,c,"throw",t)}a(void 0)}))}}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F(n.key),n)}}function B(t,e,r){return(e=F(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){return r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"get",value:function(){var e=G(A().mark((function e(r){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r);case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,t.processResponse(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:(y=G(A().mark((function e(r,n){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return o=e.sent,e.next=5,t.processResponse(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"processResponse",value:(p=G(A().mark((function t(e){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=7;break}return t.next=3,e.json();case 3:if(!(r=t.sent).error){t.next=6;break}throw new Error(r.status+": "+r.error);case 6:return t.abrupt("return",r);case 7:throw new Error(e.statusText);case 8:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})},{key:"getTracks",value:(h=G(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/tracks?limit=20");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendTrack(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})},{key:"getTrack",value:(f=G(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/tracks/".concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return f.apply(this,arguments)})},{key:"getAlbums",value:(s=G(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/albums");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendAlbum(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"getArtists",value:(l=G(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendArtist(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"getArtist",value:(u=G(A().mark((function e(r){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r));case 2:return(n=e.sent).body=this.extendArtist(n.body),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(t){return u.apply(this,arguments)})},{key:"getArtistTracks",value:(c=G(A().mark((function e(r){var n,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r,"/tracks"));case 2:return(n=e.sent).body=n.body.map((function(t){return o.extendTrack(t)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(t){return c.apply(this,arguments)})},{key:"getArtistAlbums",value:(a=G(A().mark((function e(r){var n,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r,"/albums"));case 2:return(n=e.sent).body=n.body.map((function(t){return o.extendAlbum(t)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)})},{key:"getPlaylists",value:(i=G(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/playlists");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"postSignup",value:(o=G(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/signup",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)})},{key:"postLogin",value:(n=G(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/login",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)})},{key:"postLogout",value:(r=G(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/logout",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"getCurrentUser",value:(e=G(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("/auth/check");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return e.apply(this,arguments)})},{key:"extendTrack",value:function(t){var e=this;return R(R({},t),{},{artists:t.artists.map((function(t){return e.extendArtist(t)}))})}},{key:"extendAlbum",value:function(t){var e=this;return R(R({},t),{},{artists:t.artists.map((function(t){return e.extendArtist(t)}))})}},{key:"extendArtist",value:function(t){return R(R({},t),{},{artist_page:H.artistsRoute.build({artist_id:t.id})})}}]);var e,r,n,o,i,a,c,u,l,s,f,h,p,y}();B(I,"baseUrl","/api/v1");var q=new v(null);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$(n.key),n)}}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y=function(){return!!t})()}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function X(t,e,r){return(e=$(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}I.getCurrentUser().then((function(t){return t&&q.setState(t)})),q.setState({id:0,email:"aboba@mail.ru",username:"zeritonik",avatar:"https://avatars.githubusercontent.com/u/74821810?v=4"}),r(437);var J={"/":{text:"Главная",href:"/",icon:"/static/img/icon-home.svg"},"/tracks":{text:"Треки",href:"/tracks",icon:"/static/img/icon-tracks.svg"},"/albums":{text:"Альбомы",href:"/albums",icon:"/static/img/icon-albums.svg"},"/artists":{text:"Артисты",href:"/artists",icon:"/static/img/icon-artists.svg"}},K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=V(e),function(t,e){if(e&&("object"==U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y()?Reflect.construct(e,r||[],V(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),function(t,e){return e&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){var t=this;this.element.classList.add("header"),this.active=this.createState(null),this.createCallback(q,(function(){return t.build()})),f.addCallback(H.pageRoute,this),f.addCallback(H.authRoute,this)}},{key:"build",value:function(){this.element.innerHTML="",this.element.insertAdjacentHTML("beforeend",e.template({navItems:J,user:q.getState()})),f.callCallback(H.pageRoute,this),f.callCallback(H.authRoute,this)}},{key:"render",value:function(t,e,r){t===this.active&&(e&&e.classList.remove("active"),r&&r.classList.add("active"))}},{key:"destroy",value:function(){f.removeCallback(H.pageRoute,this)}},{key:"onRoute",value:function(t){var e,r,n,o=t.route,i=t.params;switch(o){case H.pageRoute:this.active.setState(null===(e=(r=this.element).querySelector)||void 0===e||null===(e=e.call(r,'.header__nav li>a[href="'.concat(i[0],'"]')))||void 0===e?void 0:e.parentElement);break;case H.authRoute:this.element.querySelectorAll(".header__auth>a").forEach((function(t){t.classList.remove("active")})),null===(n=this.element.querySelector('.header__auth>a[href="#'.concat(i[1],'"]')))||void 0===n||n.classList.add("active")}}}])}(S);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tt=function(){return!!t})()}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function nt(t,e,r){return(e=ot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ot(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}X(K,"BASE_ELEMENT","header"),X(K,"template",Handlebars.templates["header.hbs"]),r(301);var it=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=et(e),function(t,e){if(e&&("object"==W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tt()?Reflect.construct(e,r||[],et(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(e,t),function(t,e){return e&&Z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.id="playlists-panel"}},{key:"build",value:function(){this.element.innerHTML=e.template({playlists:[]})}}])}(S);function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ct(){ct=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(at(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function ut(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ut(i,n,o,a,c,"next",t)}function c(t){ut(i,n,o,a,c,"throw",t)}a(void 0)}))}}function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function ft(t){var e=function(t){if("object"!=at(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:e+""}nt(it,"BASE_ELEMENT","section"),nt(it,"template",Handlebars.templates["playlists.hbs"]),r(767);var ht=function(){return function(t,e){return e&&st(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(e=ft(e))in t?Object.defineProperty(t,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[e]=null}(this,"playPromise"),t.instance)return t.instance;t.instance=this,this.audio=document.createElement("audio"),this.initStates(),this.setVolume(this.audioLevel)}),[{key:"initStates",value:function(){try{this.audioLevel=Number(localStorage.getItem("audio-level"))}catch(t){console.error("Failed to get audio level:",t),this.audioLevel=.5;try{localStorage.setItem("audio-level",String(this.audioLevel))}catch(t){console.error("Failed to save audio level:",t)}}this.currentTime=0,this.duration=0}},{key:"togglePlay",value:(e=lt(ct().mark((function t(){return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.audio.paused){t.next=6;break}return t.next=4,this.play();case 4:t.next=7;break;case 6:this.pause();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Playback error:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return e.apply(this,arguments)})},{key:"play",value:(t=lt(ct().mark((function t(){return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playPromise=this.audio.play(),t.abrupt("return",this.playPromise.then((function(){})).catch((function(t){throw t})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"pause",value:function(){this.playPromise&&this.playPromise.catch((function(){})),this.audio.pause()}},{key:"setTrack",value:function(t){this.audio.src=t}},{key:"setVolume",value:function(t){this.audioLevel=t,this.audio.volume=t;try{localStorage.setItem("audio-level",String(this.audioLevel))}catch(t){console.error("Failed to save audio level:",t)}}},{key:"setCurrentTime",value:function(t){this.currentTime=t}},{key:"setDuration",value:function(t){this.duration=t}}]);var t,e}();const pt=new ht;function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function mt(t){var e=function(t){if("object"!=yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}var bt=function(){return function(t,e){return e&&dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;t.instance=this,pt.audio.addEventListener("ended",(function(){return e.nextTrack()})),this.queue=[],this.savedQueue=[],this.idx=-1,this.shuffled=!1,this.repeated=!1,this.playerCallback=function(){}}),[{key:"setPlayerCallback",value:function(t){this.playerCallback=t}},{key:"callPlayerCallback",value:function(t){if("function"==typeof this.playerCallback)try{this.playerCallback(t)}catch(t){console.error("Error in player callback:",t)}else console.error("Player callback is not a function")}},{key:"addTrack",value:function(t,e){if(Array.isArray(t)){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return vt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;this.queue.push(o)}}catch(t){n.e(t)}finally{n.f()}}else this.queue.push(t);if(-1===this.idx){if(e&&(this.idx=e-1),this.repeated)return void this.nextTrack("start");this.nextTrack()}}},{key:"setTrack",value:function(){var t=this.queue[this.idx];console.log("Playing: ".concat(t.name)),pt.setTrack(t.src),pt.setDuration(t.duration),this.callPlayerCallback(t)}},{key:"nextTrack",value:function(t){if(t||!this.repeated)return this.idx=(this.idx+1)%this.queue.length,void this.setTrack();this.setTrack()}},{key:"previousTrack",value:function(){this.idx=Math.max(this.idx-1,0),this.setTrack()}},{key:"repeat",value:function(){this.repeated=!0}},{key:"unrepeat",value:function(){this.repeated=!1}},{key:"shuffle",value:function(){if(!this.shuffled){for(var t=this.queue[this.idx],e=0;e<this.queue.length;e++)this.savedQueue[e]=this.queue[e];for(var r=0;r<this.queue.length;r++){var n=Math.floor(Math.random()*(r+1)),o=[this.queue[n],this.queue[r]];this.queue[r]=o[0],this.queue[n]=o[1]}this.idx=this.queue.indexOf(t),this.shuffled=!0}}},{key:"unshuffle",value:function(){if(this.shuffled){for(var t=this.queue[this.idx],e=0;e<this.queue.length;e++)this.queue[e]=this.savedQueue[e];this.idx=this.queue.indexOf(t),this.shuffled=!1}}},{key:"getCurrentTrack",value:function(){return-1==this.idx?null:this.queue[this.idx]}},{key:"clearQueue",value:function(){this.queue=[],this.savedQueue=[],this.idx=-1,this.shuffled=!1}}])}();const gt=new bt;function wt(t){var e=Math.floor(t/60),r=Math.floor(t%60);return"".concat(e,":").concat(r.toString().padStart(2,"0"))}function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ot(n.key),n)}}function Ot(t){var e=function(t){if("object"!=kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kt(e)?e:e+""}var xt=function(){return function(t,e){return e&&_t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.fullProgress=r,this.progress=n,this.circle=o,this.isDragging=!1,this.type=i,"volume"==this.type&&this.updateProgress()}),[{key:"stopDragging",value:function(t){if(this.isDragging){this.isDragging=!1,this.fullProgress.classList.remove("dragging");var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;"play"==this.type&&(this.player.audio.currentTime=r*this.player.audio.duration),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"handleDrag",value:function(t){if(this.isDragging){var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;r=Math.max(0,Math.min(1,r)),this.progress.style.width="".concat(100*r,"%"),this.circle.style.left="".concat(100*r-1,"%"),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"startDragging",value:function(t){this.isDragging=!0,this.fullProgress.classList.add("dragging")}},{key:"handleProgressClick",value:function(t){if(!this.isDragging){var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;"play"==this.type&&(this.player.audio.currentTime=r*this.player.audio.duration),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"updateProgress",value:function(){if(!this.isDragging&&"play"==this.type&&this.player.duration){var t=this.player.audio.currentTime/this.player.duration*100;this.progress.style.width="".concat(t,"%"),this.circle.style.left="".concat(t-1,"%"),this.player.setCurrentTime(this.player.audio.currentTime)}if(!this.isDragging&&"volume"==this.type){var e=100*this.player.audio.volume;this.progress.style.width="".concat(e,"%"),this.circle.style.left="".concat(e-1,"%"),this.player.setVolume(this.player.audio.volume)}}}])}();const Pt=xt;function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tt(n.key),n)}}function St(t,e,r){return e&&Lt(t.prototype,e),r&&Lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tt(t){var e=function(t){if("object"!=Et(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Et(e)?e:e+""}var Ht=function(){return St((function t(e){jt(this,t),this.root=e,this.initElements()}),[{key:"initElements",value:function(){this.playBtn=this.getElement("#play"),this.nextBtn=this.getElement("#next"),this.prevBtn=this.getElement("#prev"),this.shuffleBtn=this.getElement("#shuffle"),this.repeatBtn=this.getElement("#repeat"),this.songImg=this.getElement("#song-img"),this.songName=this.getElement("#song-name"),this.songArtist=this.getElement("#artist-name"),this.playProgress=this.getElement("#play-progress"),this.progressBar=this.playProgress.querySelector(".rectangle-prev"),this.progressCircle=this.playProgress.querySelector(".circle"),this.volumeProgress=this.getElement("#volume-progress"),this.volumeBar=this.volumeProgress.querySelector(".rectangle-prev"),this.volumeCircle=this.volumeProgress.querySelector(".circle"),this.currentSpan=this.getElement("#current-span"),this.endSpan=this.getElement("#end-span")}},{key:"getElement",value:function(t){return this.root.querySelector(t)}}])}(),Ct=function(){return St((function t(e,r){jt(this,t),this.player=e,this.dom=r,this.playDragging=new Pt(e,r.playProgress,r.progressBar,r.progressCircle,"play"),this.volumeDragging=new Pt(e,r.volumeProgress,r.volumeBar,r.volumeCircle,"volume")}),[{key:"initPlayDrag",value:function(){this.initDragHandlers(this.dom.playProgress,this.playDragging)}},{key:"initVolumeDrag",value:function(){this.initDragHandlers(this.dom.volumeProgress,this.volumeDragging)}},{key:"initDragHandlers",value:function(t,e){t.addEventListener("click",(function(t){return e.handleProgressClick(t)})),t.addEventListener("mousedown",(function(t){return e.startDragging(t)})),document.addEventListener("mousemove",(function(t){return e.handleDrag(t)})),document.addEventListener("mouseup",(function(t){return e.stopDragging(t)}))}}])}(),Nt=function(){return St((function t(e,r){jt(this,t),this.dom=e,this.tracksQueue=r}),[{key:"initHoverEffects",value:function(){this.initButtonHover(this.dom.nextBtn,"player-next"),this.initButtonHover(this.dom.prevBtn,"player-prev")}},{key:"initButtonHover",value:function(t,e){t.addEventListener("mouseover",(function(){return t.src="/static/img/".concat(e,"-hover.svg")})),t.addEventListener("mouseout",(function(){return t.src="/static/img/".concat(e,".svg")}))}},{key:"initShuffleHandler",value:function(){var t=this;this.dom.shuffleBtn.addEventListener("mouseover",(function(){return t.handleShuffleHover()})),this.dom.shuffleBtn.addEventListener("mouseout",(function(){return t.handleShuffleHoverOut()})),this.dom.shuffleBtn.addEventListener("click",(function(){return t.toggleShuffle()}))}},{key:"handleShuffleHover",value:function(){this.tracksQueue.shuffled||(this.dom.shuffleBtn.src="/static/img/player-shuffle-hover.svg")}},{key:"handleShuffleHoverOut",value:function(){this.tracksQueue.shuffled||(this.dom.shuffleBtn.src="/static/img/player-shuffle.svg")}},{key:"toggleShuffle",value:function(){this.tracksQueue.shuffled?this.tracksQueue.unshuffle():this.tracksQueue.shuffle(),this.checkShuffle()}},{key:"checkShuffle",value:function(){this.dom.shuffleBtn.src=this.tracksQueue.shuffled?"/static/img/player-shuffle-active.svg":"/static/img/player-shuffle.svg"}},{key:"initRepeatHandler",value:function(){var t=this;this.dom.repeatBtn.addEventListener("mouseover",(function(){return t.handleRepeatHover()})),this.dom.repeatBtn.addEventListener("mouseout",(function(){return t.handleRepeatHoverOut()})),this.dom.repeatBtn.addEventListener("click",(function(){return t.toggleRepeat()}))}},{key:"handleRepeatHover",value:function(){this.tracksQueue.repeated||(this.dom.repeatBtn.src="/static/img/player-repeat-hover.svg")}},{key:"handleRepeatHoverOut",value:function(){this.tracksQueue.repeated||(this.dom.repeatBtn.src="/static/img/player-repeat.svg")}},{key:"toggleRepeat",value:function(){this.tracksQueue.repeated?this.tracksQueue.unrepeat():this.tracksQueue.repeat(),this.checkRepeat()}},{key:"checkRepeat",value:function(){this.dom.repeatBtn.src=this.tracksQueue.repeated?"/static/img/player-repeat-active.svg":"/static/img/player-repeat.svg"}}])}();function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function At(){At=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Rt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Rt(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function Mt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mt(i,n,o,a,c,"next",t)}function c(t){Mt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Ft(t,e,r){return e&&Bt(t.prototype,e),r&&Bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(It=function(){return!!t})()}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Ut(t,e){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ut(t,e)}function Qt(t,e,r){return(e=Yt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){var e=function(t){if("object"!=Rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rt(e)?e:e+""}var Vt=function(t){function e(){return Dt(this,e),function(t,e,r){return e=qt(e),function(t,e){if(e&&("object"==Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,It()?Reflect.construct(e,r||[],qt(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e)}(e,t),Ft(e,[{key:"init",value:function(){this.element.classList.add("player"),this.element.id="player"}},{key:"build",value:function(){var t=this;this.element.innerHTML="",this.element.insertAdjacentHTML("beforeend",e.template({})),this.player=pt,this.tracksQueue=gt,this.tracksQueue.setPlayerCallback((function(e){return t.switchingTrack(e)})),this.domManager=new Ht(this.element),this.timeManager=new Xt(this.player,this.domManager),this.dragHandler=new Ct(this.player,this.domManager),this.buttonStateHandler=new Nt(this.domManager,this.tracksQueue),this.eventManager=new zt(this.player,this.tracksQueue,this.domManager,this.dragHandler,this.buttonStateHandler,this)}},{key:"setDuration",value:function(t){this.domManager.endSpan.innerHTML=wt(t)}},{key:"setCurrentDuration",value:function(){var t=this.player.audio.currentTime||0;this.domManager.currentSpan.innerHTML=wt(t)}},{key:"togglePlay",value:(n=Gt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.player.togglePlay();case 3:return t.next=5,this.setPlayButtonState();case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Ошибка воспроизведения:",t.t0),this.domManager.playBtn.src="/static/img/player-play.svg";case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"setPlayButtonState",value:(r=Gt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.domManager.playBtn.src=this.player.audio.paused?"/static/img/player-play.svg":"/static/img/player-pause.svg";case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"switchingTrack",value:function(t){this.domManager.songImg.src=t.image,this.domManager.songName.innerHTML=t.name,this.domManager.songArtist.innerHTML=t.artist,this.setDuration(t.duration),this.buttonStateHandler.checkShuffle(),this.buttonStateHandler.checkRepeat(),this.togglePlay()}}]);var r,n}(S);Qt(Vt,"BASE_ELEMENT","div"),Qt(Vt,"template",Handlebars.templates["bottomPlayer.hbs"]);var zt=function(){return Ft((function t(e,r,n,o,i,a){Dt(this,t),Qt(this,"handlers",[]),this.player=e,this.tracksQueue=r,this.dom=n,this.dragHandler=o,this.buttonStateHandler=i,this.bottomPlayer=a,this.initPlayerEvents(),this.initButtonEvents(),this.initDragEvents(),this.initImageEvents()}),[{key:"initPlayerEvents",value:function(){var t=this,e=function(){t.dragHandler.playDragging.updateProgress(),t.bottomPlayer.setCurrentDuration()};this.player.audio.addEventListener("timeupdate",e),this.handlers.push((function(){t.player.audio.removeEventListener("timeupdate",e)}));var r=function(){return t.dragHandler.volumeDragging.updateProgress()};this.player.audio.addEventListener("volumechange",r),this.handlers.push((function(){t.player.audio.removeEventListener("volumechange",r)}))}},{key:"initButtonEvents",value:function(){var t=this;this.dom.playBtn.addEventListener("click",(function(){return t.bottomPlayer.togglePlay()})),this.dom.nextBtn.addEventListener("click",(function(){return t.tracksQueue.nextTrack("nextBtn")})),this.dom.prevBtn.addEventListener("click",(function(){return t.tracksQueue.previousTrack()}))}},{key:"initDragEvents",value:function(){this.dragHandler.initPlayDrag(),this.dragHandler.initVolumeDrag()}},{key:"initImageEvents",value:function(){this.buttonStateHandler.initHoverEffects(),this.buttonStateHandler.initShuffleHandler(),this.buttonStateHandler.initRepeatHandler()}},{key:"destroy",value:function(){this.handlers.forEach((function(t){return t()}))}}])}(),Xt=Ft((function t(e,r){Dt(this,t),this.player=e,this.dom=r,this.dom.endSpan.innerHTML=wt(this.player.duration)}));function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Jt(){Jt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==$t(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($t(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function Kt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,re(n.key),n)}}function Zt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zt=function(){return!!t})()}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ee(t,e)}function re(t){var e=function(t){if("object"!=$t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:e+""}r(861),r(150),Handlebars.registerPartial("music-card",Handlebars.templates["music-card.hbs"]),r(806),Handlebars.registerPartial("musics-section",Handlebars.templates["musics_section.hbs"]),r(704),Handlebars.registerPartial("track",Handlebars.templates["track.hbs"]),Handlebars.registerHelper("add",(function(t,e){return t+e})),Handlebars.registerHelper("convertDuration",(function(t){return wt(t)})),r(830),Handlebars.registerPartial("tracks-section",Handlebars.templates["tracks_section.hbs"]);var ne=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=te(e),function(t,e){if(e&&("object"==$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zt()?Reflect.construct(e,r||[],te(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(e,t),function(t,e){return e&&Wt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=Jt().mark((function t(){var n,o;return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.getTracks();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kt(i,n,o,a,c,"next",t)}function c(t){Kt(i,n,o,a,c,"throw",t)}a(void 0)}))})()}}])}(S);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ie(){ie=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==oe(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(oe(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function ae(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fe(n.key),n)}}function ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ue=function(){return!!t})()}function le(t){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(t)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}function fe(t){var e=function(t){if("object"!=oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oe(e)?e:e+""}!function(t,e,r){(e=re(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(ne,"template",Handlebars.templates["main.hbs"]),r(35);var he=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=le(e),function(t,e){if(e&&("object"==oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ue()?Reflect.construct(e,r||[],le(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(e,t),function(t,e){return e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=ie().mark((function t(){var n,o;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.getTracks();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ae(i,n,o,a,c,"next",t)}function c(t){ae(i,n,o,a,c,"throw",t)}a(void 0)}))})()}}])}(S);function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function ye(){ye=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==pe(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pe(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function ve(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,we(n.key),n)}}function me(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(me=function(){return!!t})()}function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},be(t)}function ge(t,e){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ge(t,e)}function we(t){var e=function(t){if("object"!=pe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pe(e)?e:e+""}!function(t,e,r){(e=fe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(he,"template",Handlebars.templates["tracks.hbs"]),r(67),r(520),Handlebars.registerPartial("album",Handlebars.templates["album.hbs"]),r(110),Handlebars.registerPartial("album-card",Handlebars.templates["album-card.hbs"]),r(14),Handlebars.registerPartial("albums-section",Handlebars.templates["albums_section.hbs"]),r(221),Handlebars.registerPartial("collections",Handlebars.templates["collections.hbs"]);var ke=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=be(e),function(t,e){if(e&&("object"==pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,me()?Reflect.construct(e,r||[],be(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ge(t,e)}(e,t),function(t,e){return e&&de(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=ye().mark((function t(){var n,o;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.getAlbums();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n,user:q.getState()},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ve(i,n,o,a,c,"next",t)}function c(t){ve(i,n,o,a,c,"throw",t)}a(void 0)}))})()}}])}(S);function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Oe(){Oe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==_e(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_e(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function xe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ee=function(){return!!t})()}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}function Le(t,e){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Le(t,e)}function Se(t){var e=function(t){if("object"!=_e(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_e(e)?e:e+""}!function(t,e,r){(e=we(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(ke,"template",Handlebars.templates["albums.hbs"]),r(561),r(202),Handlebars.registerPartial("artist-card",Handlebars.templates["artist-card.hbs"]),r(986),Handlebars.registerPartial("artists-section",Handlebars.templates["artists_section.hbs"]);var Te=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=je(e),function(t,e){if(e&&("object"==_e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,r||[],je(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(e,t),function(t,e){return e&&Pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page","page--profile")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",q.getState()?(t=Oe().mark((function t(){var n,o,i,a;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={minutes:0,tracks:0,artists:0},t.next=3,I.getAlbums();case 3:return o=t.sent.body,t.next=6,I.getTracks();case 6:return i=t.sent.body,t.next=9,I.getArtists();case 9:a=t.sent.body,r.element.insertAdjacentHTML("beforeend",e.template({user:q.getState(),stats:n,playlists:o,tracks:i,artists:a}));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,c,"next",t)}function c(t){xe(i,n,o,a,c,"throw",t)}a(void 0)}))})():f.pushUrl("/#login",{})}},{key:"render",value:function(t,e,r){}}])}(S);function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Ne(t,e,r){return e&&Ce(t.prototype,e),r&&Ce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Re(t){var e=function(t){if("object"!=He(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==He(e)?e:e+""}function Ae(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}!function(t,e,r){(e=Se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Te,"template",Handlebars.templates["profile.hbs"]),r(567);var Ge=new Set(Ae("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")),De=new Set([].concat(Ae(Ge),["_"],Ae("0123456789"))),Be=new Set([].concat(Ae(De),Ae("@#!."))),Fe=/.+@.+\..+/i;function Ie(t){return Ae(t).every((function(t){return De.has(t)}))}function qe(t){return Ae(t).every((function(t){return Be.has(t)}))}function Ue(t){return Ae(t).some((function(t){return Ge.has(t)}))}var Qe=new(Ne((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.password={minLength:4,maxLength:25,containsLetter:Ue,containsValidChars:Ie,errorMessages:{length:"Пароль должен быть от 4 до 25 символов",containsLetter:"Пароль должен содержать хотя бы одну букву",containsValidChars:"Пароль может содержать только латинские буквы, цифры и подчеркивания"}},this.passwordRepeat={minLength:4,maxLength:25,match:function(t,e){return t===e},errorMessages:{length:"Пароли не совпадают",match:"Пароли не совпадают"}},this.username={minLength:3,maxLength:20,containsLetter:Ue,containsValidChars:Ie,errorMessages:{length:"Логин должен быть от 3 до 20 символов",containsLetter:"Логин должен содержать хотя бы одну букву",containsValidChars:"Логин может содержать только латинские буквы, цифры и подчеркивания"}},this.email={minLength:5,maxLength:30,containsValidChars:qe,match:function(t){return Fe.test(t)},errorMessages:{length:"Email должен быть от 5 до 30 символов",containsValidChars:"Введите корректный email",match:"Введите корректный email"}},this.identifier={minLength:3,maxLength:30,containsValidChars:qe,errorMessages:{}}})));function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function ze(t){var e=function(t){if("object"!=Ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:e+""}var Xe=function(){return function(t,e){return e&&Ve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.input=r,this.loginForm=n,this.inputHTML=this.form.querySelector('[name="'.concat(this.input.name,'"]')),this.validationMessage=this.form.querySelector('[name="'.concat(this.input.name,'-error"]')),this.inputHTML.addEventListener("input",this.inputListener.bind(this)),this.valid=!1,this.error=null}),[{key:"setState",value:function(t,e){this.valid=t,this.error=e,this.mark()}},{key:"mark",value:function(){if(this.validationMessage&&!this.loginForm){if(!this.valid)return this.validationMessage.textContent=this.error,void this.inputHTML.classList.add("border-error");this.validationMessage.textContent=this.error,this.inputHTML.classList.remove("border-error")}}},{key:"isValid",value:function(){return this.valid}},{key:"inputListener",value:function(){var t,e=Qe[this.input.name],r=this.inputHTML.value;if((r.length<e.minLength||r.length>e.maxLength)&&(t=e.errorMessages.length),e.containsLetter&&!e.containsLetter(r)&&(t=e.errorMessages.containsLetter),e.containsValidChars&&!e.containsValidChars(r)&&(t=e.errorMessages.containsValidChars),e.match){if("passwordRepeat"===this.input.name){var n=this.form.querySelector('[name="password"]').value;n&&!e.match(r,n)&&(t=e.errorMessages.match)}"passwordRepeat"===this.input.name||e.match(r)||(t=e.errorMessages.match)}if(t)this.setState(!1,t);else if(this.setState(!0,null),"password"===this.input.name){var o=this.form.querySelector('[name="passwordRepeat"]');o&&o.dispatchEvent(new Event("input"))}else if("passwordRepeat"===this.input.name){var i=this.form.querySelector('[name="password"]');i&&i.dispatchEvent(new Event("input"))}}}])}(),$e={inputs:[{type:"text",text:"Введите логин:",name:"username",errorName:"username-error",placeholder:"логин"},{type:"email",text:"Введите email:",name:"email",errorName:"email-error",placeholder:"email"},{type:"password",text:"Введите пароль:",name:"password",errorName:"password-error",placeholder:"пароль"},{type:"password",text:"Повторите пароль:",name:"passwordRepeat",errorName:"passwordRepeat-error",placeholder:"пароль"}],submitText:"Зарегистрироваться",header:"Регистрация"},Je={inputs:[{type:"text",text:"Введите логин/email:",name:"identifier",errorName:"identifier-error",placeholder:"логин/email"},{type:"password",text:"Введите пароль:",name:"password",errorName:"password-error",placeholder:"пароль"}],submitText:"Войти",header:"Авторизация"};function Ke(t){var e=document.querySelector('[name="global-error"]');e&&(e.textContent=t,e.className="error-message")}function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Ze(){Ze=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==We(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(We(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function tr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ar(n.key),n)}}function rr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rr=function(){return!!t})()}function nr(t){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nr(t)}function or(t,e){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},or(t,e)}function ir(t,e,r){return(e=ar(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ar(t){var e=function(t){if("object"!=We(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==We(e)?e:e+""}var cr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=nr(e),function(t,e){if(e&&("object"==We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rr()?Reflect.construct(e,r||[],nr(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&or(t,e)}(e,t),function(t,e){return e&&er(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(t){this.authType=t,this.element.id="auth-form",this.element.classList.add("auth-form")}},{key:"build",value:function(){var t=this;this.element.innerHTML="";var r=this.getContent();this.element.insertAdjacentHTML("beforeend",e.template(r)),this.element.addEventListener("mousedown",(function(t){"auth-form"===t.target.id&&f.pushUrl(f.getPath(),{})}));var n=[];r.inputs.forEach((function(e){if(e){var r=new Xe(t.element,e,"login"===t.authType);n.push(r)}})),this.element.addEventListener("submit",(function(e){e.preventDefault();var r=!1,o={};n.forEach((function(t){t.isValid()||(r=!0),o[t.input.name]=t.inputHTML.value})),r||(o.identifier&&o.identifier.includes("@")&&(o.email=o.identifier,delete o.identifier),o.identifier&&!o.identifier.includes("@")&&(o.username=o.identifier,delete o.identifier),Ke(""),t.sendData(o))}))}},{key:"getContent",value:function(){switch(this.authType){case"login":return Je;case"register":return $e}}},{key:"sendData",value:function(t){var e,r=this;(e=Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"register"!==r.authType){e.next=11;break}return e.prev=2,e.next=5,I.postSignup(t);case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Ke(e.t0.message);case 11:if("login"!==r.authType){e.next=21;break}return e.prev=12,e.next=15,I.postLogin(t);case 15:e.sent,e.next=21;break;case 18:e.prev=18,e.t1=e.catch(12),Ke(e.t1.message);case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(0),Ke("Ошибка сети, попробуйте позже");case 26:case"end":return e.stop()}}),e,null,[[0,23],[2,8],[12,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){tr(i,n,o,a,c,"next",t)}function c(t){tr(i,n,o,a,c,"throw",t)}a(void 0)}))})()}}])}(S);function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function lr(){lr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ur(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ur(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function sr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vr(n.key),n)}}function hr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hr=function(){return!!t})()}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}function yr(t,e){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yr(t,e)}function vr(t){var e=function(t){if("object"!=ur(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ur(e)?e:e+""}ir(cr,"BASE_ELEMENT","form"),ir(cr,"template",Handlebars.templates["auth.hbs"]),r(13);var dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=pr(e),function(t,e){if(e&&("object"==ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hr()?Reflect.construct(e,r||[],pr(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(e,t),function(t,e){return e&&fr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page","page--artists")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=lr().mark((function t(){var n,o;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.getArtists();case 3:n=t.sent.body,o={loved:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sr(i,n,o,a,c,"next",t)}function c(t){sr(i,n,o,a,c,"throw",t)}a(void 0)}))})()}}])}(S);function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function br(){br=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==mr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mr(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function gr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xr(n.key),n)}}function kr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kr=function(){return!!t})()}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}function Or(t,e){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Or(t,e)}function xr(t){var e=function(t){if("object"!=mr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mr(e)?e:e+""}!function(t,e,r){(e=vr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(dr,"template",Handlebars.templates["artists.hbs"]),r(481);var Pr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=_r(e),function(t,e){if(e&&("object"==mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kr()?Reflect.construct(e,r||[],_r(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Or(t,e)}(e,t),function(t,e){return e&&wr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(t){this.id=t,this.element.classList.add("page","page--artist")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=br().mark((function t(){var n,o,i,a;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={listeners:0},t.next=3,I.getArtist(r.id);case 3:return o=t.sent.body,t.next=6,I.getArtistAlbums(r.id);case 6:return i=t.sent.body,t.next=9,I.getArtistTracks(r.id);case 9:a=t.sent.body,r.element.insertAdjacentHTML("beforeend",e.template({artist:o,albums:i,tracks:a,stats:n}));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gr(i,n,o,a,c,"next",t)}function c(t){gr(i,n,o,a,c,"throw",t)}a(void 0)}))})()}},{key:"render",value:function(t,e,r){}}])}(S);function Er(t){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lr(n.key),n)}}function Lr(t){var e=function(t){if("object"!=Er(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Er(e)?e:e+""}function Sr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sr=function(){return!!t})()}function Tr(){return Tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Hr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Tr.apply(null,arguments)}function Hr(t){return Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hr(t)}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}!function(t,e,r){(e=xr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Pr,"template",Handlebars.templates["artist.hbs"]);var Nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Hr(e),function(t,e){if(e&&("object"==Er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sr()?Reflect.construct(e,r||[],Hr(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(e,t),function(t,e){return e&&jr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("artists-layout","layout"),this.page=this.createState(null),f.addCallback(H.artistsRoute,this)}},{key:"build",value:function(){f.callCallback(H.artistsRoute,this)}},{key:"render",value:function(t,e,r){t===this.page&&(e&&e.destroy(),r&&this.element.appendChild(r.element))}},{key:"destroy",value:function(){!function(t,e,r){var n=Tr(Hr(t.prototype),"destroy",r);return"function"==typeof n?function(t){return n.apply(r,t)}:n}(e,0,this)([]),f.removeCallback(H.artistsRoute,this)}},{key:"onRoute",value:function(t){var e=t.route,r=t.params;switch(e){case H.artistsRoute:if(r[1]){var n=parseInt(r[1]);this.page.setState(new Pr(n));break}this.page.setState(new dr)}}}])}(S);function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mr(n.key),n)}}function Mr(t){var e=function(t){if("object"!=Rr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rr(e)?e:e+""}function Gr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gr=function(){return!!t})()}function Dr(){return Dr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Dr.apply(null,arguments)}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}function Fr(t,e){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fr(t,e)}var Ir=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Br(e),function(t,e){if(e&&("object"==Rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gr()?Reflect.construct(e,r||[],Br(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fr(t,e)}(e,t),function(t,e){return e&&Ar(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("main-layout"),this.child=this.createState(null),this.popup=this.createState(null),f.addCallback(H.pageRoute,this),f.addCallback(H.authRoute,this),f.addCallback(H.artistsRoute,this)}},{key:"build",value:function(){this.header=new K,this.playlists=new it,this.bottomPlayer=new Vt,this.element.appendChild(this.header.element),this.element.appendChild(this.playlists.element),this.element.appendChild(this.bottomPlayer.element),f.callCallback(H.pageRoute,this),f.callCallback(H.authRoute,this),f.callCallback(H.artistsRoute,this)}},{key:"render",value:function(t,e,r){switch(t){case this.child:e&&e.element.remove(),this.element.appendChild(r.element);break;case this.popup:e&&e.destroy(),r&&this.element.appendChild(r.element)}}},{key:"destroy",value:function(){!function(t,e,r){var n=Dr(Br(t.prototype),"destroy",r);return"function"==typeof n?function(t){return n.apply(r,t)}:n}(e,0,this)([]),f.removeCallback(H.pageRoute,this),f.removeCallback(H.authRoute,this),f.removeCallback(H.artistsRoute,this)}},{key:"onRoute",value:function(t){var e=t.route,r=t.params;switch(e){case H.authRoute:switch(r[1]){case"login":this.popup.setState(new cr("login"));break;case"register":this.popup.setState(new cr("register"));break;default:this.popup.setState(null)}break;case H.pageRoute:switch(r[1]){case"":this.child.setState(new ne);break;case"tracks":this.child.setState(new he);break;case"albums":this.child.setState(new ke);break;case"artists":this.child.setState(new Nr);break;case"profile":this.child.setState(new Te)}break;case H.logoutRoute:if(""===r[0])break;q.setState(null),f.pushUrl("/",{})}}}])}(S);function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Ur(){Ur=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(H([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==qr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(qr(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function Qr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Yr(){var t;return t=Ur().mark((function t(e){var r,n,o,i,a,c,u,l,s,f,h,p,y,v,d,m;return Ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getAttribute("data-id"),n=e.closest(".section"),o=[],i=Array.from(n.querySelectorAll("#track")),a=0,c=0,u=0,l=i;case 7:if(!(u<l.length)){t.next=24;break}return s=l[u],f=s.getAttribute("data-id"),t.next=12,I.getTrack(Number(f));case 12:h=t.sent.body,p=h.file_url,y=h.duration,v=h.title,d=h.artists[0].title,m=h.thumbnail_url,o.push({name:v,artist:d,image:m,duration:y,src:p,id:Number(f)}),f===r&&(c=a),a++;case 21:u++,t.next=7;break;case 24:gt.clearQueue(),gt.addTrack(o,c);case 26:case"end":return t.stop()}}),t)})),Yr=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qr(i,n,o,a,c,"next",t)}function c(t){Qr(i,n,o,a,c,"throw",t)}a(void 0)}))},Yr.apply(this,arguments)}function Vr(t){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xr(n.key),n)}}function Xr(t){var e=function(t){if("object"!=Vr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vr(e)?e:e+""}function $r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($r=function(){return!!t})()}function Jr(t){return Jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jr(t)}function Kr(t,e){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kr(t,e)}var Wr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Jr(e),function(t,e){if(e&&("object"==Vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$r()?Reflect.construct(e,r||[],Jr(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e)}(e,t),function(t,e){return e&&zr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){console.log("App init"),this.initEventListeners()}},{key:"build",value:function(){this.element.appendChild((new Ir).element)}},{key:"initEventListeners",value:function(){var t=this;this.element.addEventListener("click",(function(t){var e=t.target;if(e instanceof HTMLAnchorElement){if(t.preventDefault(),"not-allowed"==e.style.cursor)return;console.error("[App] Navigating to ".concat(e.href)),f.pushUrl(e.href,{})}if(e instanceof HTMLElement&&"track"===e.closest("div").id){var r=e.closest("div"),n=gt.getCurrentTrack();n&&r.getAttribute("data-id")===n.id.toString()?pt.togglePlay():function(t){Yr.apply(this,arguments)}(r)}})),setInterval((function(){for(var e=Array.from(t.element.querySelectorAll("#track")),r=gt.getCurrentTrack(),n=0,o=e;n<o.length;n++){var i,a,c=o[n],u=null!==(i=c.querySelector(".track__img"))&&void 0!==i?i:c.querySelector(".music-card__img"),l=null!==(a=c.querySelector(".track__play"))&&void 0!==a?a:c.querySelector(".music-card__play");r&&c.getAttribute("data-id")===r.id.toString()?(u.classList.add("track-active"),l.classList.add("track-icon-active"),pt.audio.paused?l.src="/static/img/player-play.svg":l.src="/static/img/player-pause.svg"):(u.classList.remove("track-active"),l.classList.remove("track-icon-active"),l.src="/static/img/player-play.svg")}}),300)}}])}(T);new Wr})()})();