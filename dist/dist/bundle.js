/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={10:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["small.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){return'<div class="small-player__container">\n    <div class="small-player__song-container">\n        <div class="small-player__song" id="song-container">\n            <img id="song-img">\n            <div class="small-player__song-text">\n                <span id="song-name" class="song-name">nothing</span>\n                <span id="artist-name" class="artist-name">nothing</span>\n            </div>\n        </div>\n        <img src=\'/static/img/like-default.svg\' class=\'icon\' alt=\'Like\' />\n        <img src=\'/static/img/dots.svg\' class=\'icon\' alt=\'Menu\' />\n    </div>\n\n    <div class="small-player__widgets">\n        <div class="small-player__controls">\n            <img src="/static/img/player-shuffle.svg" class="icon" id="shuffle" alt="Shuffle">\n            <img src="/static/img/player-prev.svg" class="icon" id="prev" alt="Prev">\n            <img src="/static/img/player-play.svg" class="icon" id="play" alt="Play">\n            <img src="/static/img/player-next.svg" class="icon" id="next" alt="Next">\n            <img src="/static/img/player-repeat.svg" class="icon" id="repeat" alt="Repeat">\n        </div>\n        <div class="small-player__progress-container">\n            <span id="current-span">0:00</span>\n            <div class="rectangle" id="play-progress">\n                <div class="rectangle-prev"></div>\n                <div class="circle"></div>\n            </div>\n            <span id=\'end-span\'>0:00</span>\n        </div>\n    </div>\n\n    <div class="small-player__tools">\n        <img class="icon" src="/static/img/volume.svg" alt="Volume">\n        <div class="rectangle-volume" id="volume-progress">\n            <div class="rectangle-prev"></div>\n            <div class="circle"></div>\n        </div>\n        <img class="icon resize" src="/static/img/maximize.svg" id="resize" alt="Small">\n    </div>\n</div>'},useData:!0})},13:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artists.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые исполнители"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(u(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>  \n\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"loved"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")},usePartial:!0,useData:!0})},14:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["albums_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"album"),e,{name:"album",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--albums">\n    <h1 class="section__title">'+u(a(null!=e?c(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+u(a(null!=e?c(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=c(r,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"albums"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},35:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["tracks.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"recent"):e,href_all:"#",title:"Недавно прослушанные"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},5:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(u(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recent"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"loved"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")},usePartial:!0,useData:!0})},67:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["albums.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"albums-card-section"),e,{name:"albums-card-section",hash:{albums:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"albums-section"),e,{name:"albums-section",hash:{albums:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(u(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"loved"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")},usePartial:!0,useData:!0})},110:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["album-card.hbs"]=t({1:function(t,e,r,n,o){return"            <img\n                class='album-card__like'\n                src='/static/img/like-active.svg'\n                alt='like'\n            />\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='album-card'>\n    <a href='"+u(a(null!=e?c(e,"album_page"):e,e))+"' style='cursor: not-allowed;'>\n        <img src='"+u(a(null!=e?c(e,"thumbnail_url"):e,e))+"' alt='' class='album-card__img' />\n        <span class='album-card__title'>"+u(a(null!=e?c(e,"title"):e,e))+"</span>\n        <a\n            href='"+u(a(null!=(i=null!=(i=null!=e?c(e,"artists"):e)?c(i,"0"):i)?c(i,"artist_page"):i,e))+"'\n            class='album-card__artist'\n        >"+u(a(null!=(i=null!=(i=null!=e?c(e,"artists"):e)?c(i,"0"):i)?c(i,"title"):i,e))+"</a>\n"+(null!=(i=c(r,"if").call(null!=e?e:t.nullContext||{},null!=e?c(e,"isLiked"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:9,column:8},end:{line:15,column:15}}}))?i:"")+"    </a>\n</div>"},useData:!0})},124:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["albums-card_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"album-card"),e,{name:"album-card",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--albums-card">\n    <h1 class="section__title">'+u(a(null!=e?c(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+u(a(null!=e?c(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=c(r,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"albums"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},150:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["music-card.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='music-card "+u(a(null!=e?c(e,"classes"):e,e))+'\'>\n    <div class="music-card__wrapper" data-type="track" data-track-id="'+u(a(null!=e?c(e,"id"):e,e))+"\">\n        <img src='"+u(a(null!=e?c(e,"thumbnail_url"):e,e))+"' alt='' class='music-card__img' />\n        <img src='/static/img/play.svg' class='music-card__play' />\n    </div>\n    <span class='music-card__title'>"+u(a(null!=e?c(e,"title"):e,e))+"</span>\n    <a\n        href='"+u(a(null!=(i=null!=(i=null!=e?c(e,"artists"):e)?c(i,"0"):i)?c(i,"artist_page"):i,e))+"'\n        class='music-card__artist'\n    >"+u(a(null!=(i=null!=(i=null!=e?c(e,"artists"):e)?c(i,"0"):i)?c(i,"title"):i,e))+"</a>\n</div>"},useData:!0})},202:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artist-card.hbs"]=t({1:function(t,e,r,n,o){return"            <img\n                class='artist-card__like'\n                src='/static/img/like-active.svg'\n                alt='like'\n            />\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='artist-card'>\n    <a href='"+u(a(null!=e?c(e,"artist_page"):e,e))+"'>\n        <img\n            class='artist-card__img'\n            src='"+u(a(null!=e?c(e,"thumbnail_url"):e,e))+"'\n            alt='artist'\n        />\n        <span class='artist-card__name'>"+u(a(null!=e?c(e,"title"):e,e))+"</span>\n"+(null!=(i=c(r,"if").call(null!=e?e:t.nullContext||{},null!=e?c(e,"isFollowed"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:9,column:8},end:{line:15,column:15}}}))?i:"")+"    </a>\n</div>"},useData:!0})},221:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["collections.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){return"<div class='collections-container section__content'>\n    <div>\n        <button class='collections-container__favourite'>\n        </button>\n        <span>Самое любимое</span>\n    </div>\n\n    <div>\n        <button class='collections-container__popular'>\n        </button>\n        <span>Популярное</span>\n    </div>\n\n    <div>\n        <button class='collections-container__new'>\n        </button>\n        <span>Новинки</span>\n    </div>\n\n    <div>\n        <button class='collections-container__week'>\n        </button>\n        <span>Открытия недели</span>\n    </div>\n\n    <div>\n        <button class='collections-container__top'>\n        </button>\n        <span>Топ чарт</span>\n    </div>\n</div>"},useData:!0})},301:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["playlists.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'    <li class="item">\n        <a href="'+u(a(null!=e?c(e,"href"):e,e))+'">\n            <img src="'+u(a(null!=e?c(e,"img"):e,e))+'" alt="playlist #'+u("function"==typeof(i=null!=(i=c(r,"index")||o&&c(o,"index"))?i:t.hooks.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"index",hash:{},data:o,loc:{start:{line:8,column:51},end:{line:8,column:61}}}):i)+'">\n        </a>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<ul id="playlists-list">\n    <button class="playlist-add" style="cursor: not-allowed;">\n        <img src="../../static/img/plus.svg">\n    </button>\n'+(null!=(i=a(r,"each").call(null!=e?e:t.nullContext||{},null!=e?a(e,"playlists"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:4},end:{line:10,column:13}}}))?i:"")+"</ul>\n"},useData:!0})},437:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["header.hbs"]=t({1:function(t,e,r,n,o){var i=t.lambda,a=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"                <li class='item'>\n                    <a href='"+a(i(null!=e?u(e,"href"):e,e))+"'>\n                        <img class='header__icon' src='"+a(i(null!=e?u(e,"icon"):e,e))+"' />\n                        <span class='header__span'>"+a(i(null!=e?u(e,"text"):e,e))+"</span>\n                    </a>\n                </li>\n"},3:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"        <div class='header__profile'>\n            <img\n                class='profile__img'\n                src='"+u(a(null!=(i=null!=e?c(e,"user"):e)?c(i,"avatar_url"):i,e))+"'\n                alt='profile'\n            />\n            <div class='profile__dropdown'>\n                <span class='profile__user'>"+u(a(null!=(i=null!=e?c(e,"user"):e)?c(i,"username"):i,e))+"</span>\n                <a href='/profile'>Профиль</a>\n                <a href='/profile/settings'>Настройки</a>\n                <a href='/logout'>Выйти</a>\n            </div>\n        </div>\n"},5:function(t,e,r,n,o){return"        <div class='header__auth'>\n            <a class='btn' href='#login'>Войти</a>\n            <a class='btn' href='#register'>Регистрация</a>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div class='header__logo-container'>\n    <a class='header__logo'>\n        <img class='logo' src='/static/img/logo.png' alt='logo' />\n    </a>\n</div>\n\n<div class='header__main'>\n    <form class='header__search' onsubmit='return false;'>\n        <img class='search-icon' src='static/img/icon-search.svg' />\n        <input type='text' id='search' name='search' placeholder='поиск...' />\n    </form>\n    <nav class='header__nav'>\n        <ul class='header-list'>\n"+(null!=(i=u(r,"each").call(a,null!=e?u(e,"navItems"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:12},end:{line:21,column:21}}}))?i:"")+"        </ul>\n    </nav>\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"user"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.program(5,o,0),data:o,loc:{start:{line:24,column:4},end:{line:43,column:11}}}))?i:"")+"</div>"},useData:!0})},481:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artist.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"albums-card-section"),e,{name:"albums-card-section",hash:{musics:null!=e?a(e,"albums"):e,href_all:"#",title:"Популярные альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"tracks"):e,href_all:"#",title:"Популярные альбомы"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="artist__info">\n    <img class="artist__info__img" src="'+u(a(null!=(i=null!=e?l(e,"artist"):e)?l(i,"thumbnail_url"):i,e))+'" alt="error loading avatar">\n    <div>\n        <span class="artist__info__type">Исполнитель</span>\n        <h2 class="artist__info__username">'+u(a(null!=(i=null!=e?l(e,"artist"):e)?l(i,"title"):i,e))+'</h2>\n        <span class="artist__info__stats">'+u(a(null!=(i=null!=e?l(e,"stats"):e)?l(i,"listeners"):i,e))+' слушателей за месяц</span>\n        <div class="artist__info__actions">\n            <img class="artist__info__actions__play" src="/static/img/play.svg" alt="edit">\n            <button class="artist__info__actions__subscribe btn">Подписаться</button>\n        </div>\n    </div>\n</div>\n\n'+(null!=(i=l(r,"if").call(c,null!=e?l(e,"albums"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(c,null!=e?l(e,"tracks"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?i:"")},usePartial:!0,useData:!0})},520:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["album.hbs"]=t({1:function(t,e,r,n,o){return"album_norder"},3:function(t,e,r,n,o){return'        <img src="/static/img/pause.svg" alt="pause" class="album__play">\n'},5:function(t,e,r,n,o){return'        <img src="/static/img/play.svg" alt="play" class="album__play">\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lambda,c=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="album '+(null!=(i=l(r,"unless").call(a,null!=e?l(e,"ind"):e,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:1,column:18},end:{line:1,column:61}}}))?i:"")+'">\n    <span class="album__index">'+c(u(null!=e?l(e,"ind"):e,e))+'</span>\n    <img src="'+c(u(null!=e?l(e,"thumbnail_url"):e,e))+'" alt="" class="album__img">\n    <a href="'+c(u(null!=e?l(e,"album_page"):e,e))+'" style="cursor: not-allowed;" class="album__title">'+c(u(null!=e?l(e,"title"):e,e))+'</a>\n    <a href="'+c(u(null!=(i=null!=(i=null!=e?l(e,"artists"):e)?l(i,"0"):i)?l(i,"artist_page"):i,e))+'" class="album__artist">\n        '+c(u(null!=(i=null!=(i=null!=e?l(e,"artists"):e)?l(i,"0"):i)?l(i,"title"):i,e))+'\n    </a>\n    <span class="album__description">'+c(u(null!=e?l(e,"description"):e,e))+"</span>\n    \n"+(null!=(i=l(r,"if").call(a,null!=e?l(e,"isPlaying"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.program(5,o,0),data:o,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))?i:"")+"</div>\n"},useData:!0})},561:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["profile.hbs"]=t({1:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'            <div class="profile__info__stats">\n                <span>'+(null!=(i=u(r,"if").call(a,null!=(i=null!=e?u(e,"user"):e)?u(i,"is_public_minutes_listened"):i,{name:"if",hash:{},fn:t.program(2,o,0),inverse:t.program(4,o,0),data:o,loc:{start:{line:8,column:22},end:{line:8,column:104}}}))?i:"")+" минут прослушано</span>\n                <span>"+(null!=(i=u(r,"if").call(a,null!=(i=null!=e?u(e,"user"):e)?u(i,"is_public_tracks_listened"):i,{name:"if",hash:{},fn:t.program(6,o,0),inverse:t.program(4,o,0),data:o,loc:{start:{line:9,column:22},end:{line:9,column:102}}}))?i:"")+" треков услышано</span>\n                <span>"+(null!=(i=u(r,"if").call(a,null!=(i=null!=e?u(e,"user"):e)?u(i,"is_public_artists_listened"):i,{name:"if",hash:{},fn:t.program(8,o,0),inverse:t.program(4,o,0),data:o,loc:{start:{line:10,column:22},end:{line:10,column:104}}}))?i:"")+" артистов изучено</span>\n            </div>\n"},2:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda(null!=(i=null!=e?a(e,"stats"):e)?a(i,"minutes"):i,e))},4:function(t,e,r,n,o){return"?"},6:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda(null!=(i=null!=e?a(e,"stats"):e)?a(i,"tracks"):i,e))},8:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda(null!=(i=null!=e?a(e,"stats"):e)?a(i,"artists"):i,e))},10:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"playlists"):e,href_all:"#",title:"Плейлисты"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},12:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"tracks"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},14:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artists-section"),e,{name:"artists-section",hash:{artists:null!=e?a(e,"artists"):e,href_all:"#",title:"Любимые исполнители"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="profile__info">\n    <img class="profile__info__img" src="'+u(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"avatar_url"):i,e))+'" alt="error loading avatar">\n    <div>\n        <h2 class="profile__info__username">'+u(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"username"):i,e))+'</h2>\n        <img class="profile__info__actions" src="/static/img/dots.svg" alt="edit">\n'+(null!=(i=l(r,"if").call(c,null!=e?l(e,"stats"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:8},end:{line:12,column:15}}}))?i:"")+"    </div>\n</div>\n\n"+(null!=(i=l(r,"if").call(c,null!=e?l(e,"playlists"):e,{name:"if",hash:{},fn:t.program(10,o,0),inverse:t.noop,data:o,loc:{start:{line:16,column:0},end:{line:18,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(c,null!=e?l(e,"tracks"):e,{name:"if",hash:{},fn:t.program(12,o,0),inverse:t.noop,data:o,loc:{start:{line:20,column:0},end:{line:22,column:7}}}))?i:"")+"\n"+(null!=(i=l(r,"if").call(c,null!=e?l(e,"artists"):e,{name:"if",hash:{},fn:t.program(14,o,0),inverse:t.noop,data:o,loc:{start:{line:24,column:0},end:{line:26,column:7}}}))?i:"")},usePartial:!0,useData:!0})},567:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["auth.hbs"]=t({1:function(t,e,r,n,o){var i=t.lambda,a=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"        <div class='auth-main__input-container'>\n            <div class='auth-main__input-container'>\n                <div class=\"auth-form__span-container\">\n                    <span>"+a(i(null!=e?u(e,"text"):e,e))+"</span>\n                </div>\n                <input\n                    type='"+a(i(null!=e?u(e,"type"):e,e))+"'\n                    placeholder='"+a(i(null!=e?u(e,"placeholder"):e,e))+"'\n                    name='"+a(i(null!=e?u(e,"name"):e,e))+"'\n                    class='auth-form__base-input'\n                    required\n                />\n            </div>\n            <p class='error-message' name='"+a(i(null!=e?u(e,"errorName"):e,e))+"'></p>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a,u=t.escapeExpression,c=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"<div id='auth' class='auth-main'>\n    <p>"+u(t.lambda(null!=e?l(e,"header"):e,e))+"</p>\n    <div class='auth-main__line'></div>\n\n"+(null!=(i=l(r,"each").call(c,null!=e?l(e,"inputs"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:4},end:{line:21,column:13}}}))?i:"")+"\n    <p class='error-message' name='global-error'></p>\n    <input type='submit' value='"+u("function"==typeof(a=null!=(a=l(r,"submitText")||(null!=e?l(e,"submitText"):e))?a:t.hooks.helperMissing)?a.call(c,{name:"submitText",hash:{},data:o,loc:{start:{line:24,column:32},end:{line:24,column:46}}}):a)+"' class='auth-form__submit-btn' />\n</div>"},useData:!0})},602:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["settings.hbs"]=t({1:function(t,e,r,n,o){return"checked"},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=null!=e?e:t.nullContext||{},l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="page--settings__top">\n    <div class="page--settings__top__avatar">\n        <div class="form-input-container--image">\n            <img class="form-input-container--image__image" src="">\n            <label class="form-input-container--image__button" for="avatar">\n                <img src="/static/img/pencil.svg">\n            </label>\n            <input class="form-input-container--image__input" type="file" id="avatar" accept="image/*">\n        </div>\n    </div>\n    <div class="page--settings__top__info">\n        <span>Логин:</span>\n        <span>'+u(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"username"):i,e))+"</span>\n        <span>Email:</span>\n        <span>"+u(a(null!=(i=null!=e?l(e,"user"):e)?l(i,"email"):i,e))+'</span>\n    </div>\n</div>\n<div class="page--settings__main">\n    <div class="page--settings__main__auth">\n        <h1 class="page--settings__main__auth__title">Учетные данные</h1>\n        <div class="form-input-container">\n            <label class="form-input-container__label" for="username">Логин</label>\n            <input class="form-input-container__input" name="new-username" type="text" id="username" placeholder="новый логин">\n        </div>\n        <div class="form-input-container">\n            <label class="form-input-container__label" for="email">Email</label>\n            <input class="form-input-container__input" name="new-email" type="email" id="email" placeholder="новый email">\n        </div>\n    </div>\n    <div class="page--settings__main__security">\n        <h1 class="page--settings__main__security__title">Безопасность</h1>\n        <div class="form-input-container">\n            <label class="form-input-container__label" for="password">Действующий пароль</label>\n            <input class="form-input-container__input" name="password" type="password" id="password" placeholder="действующий пароль">\n        </div>\n        <div class="form-input-container">\n            <label class="form-input-container__label" for="new-password">Новый пароль</label>\n            <input class="form-input-container__input" name="new-password" type="password" id="new-password" placeholder="новый пароль">\n        </div>\n    </div>\n    <div class="page--settings__main__privacy">\n        <h1 class="page--settings__main__privacy__title">Приватность</h1>\n        <div>\n            <div class="form-input-container page--settings__main__privacy__playlists">\n                <label class="form-input-container__label">Плейлисты</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-playlists"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_playlists"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:49,column:42},end:{line:49,column:88}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-playlists"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_playlists"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:54,column:41},end:{line:54,column:95}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n            <div class="form-input-container page--settings__main__privacy__artists">\n                <label class="form-input-container__label">Любимые исполнители</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-artists"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_favorite_artists"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:64,column:42},end:{line:64,column:95}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-artists"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_favorite_artists"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:69,column:41},end:{line:69,column:102}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n            <div class="form-input-container page--settings__main__privacy__tracks">\n                <label class="form-input-container__label">Любимые треки</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-tracks"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_favorite_tracks"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:79,column:42},end:{line:79,column:94}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-tracks"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_favorite_tracks"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:84,column:41},end:{line:84,column:101}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n            <div class="form-input-container page--settings__main__privacy__stats-minutes">\n                <label class="form-input-container__label">Минут прослушано</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-minutes-listened"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_minutes_listened"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:94,column:42},end:{line:94,column:95}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-minutes-listened"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_minutes_listened"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:99,column:41},end:{line:99,column:102}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n            <div class="form-input-container page--settings__main__privacy__stats-tracks">\n                <label class="form-input-container__label">Треков прослушано</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-tracks-listened"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_tracks_listened"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:109,column:42},end:{line:109,column:94}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-tracks-listened"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_tracks_listened"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:114,column:41},end:{line:114,column:101}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n            <div class="form-input-container page--settings__main__privacy__stats-artists">\n                <label class="form-input-container__label">Артистов прослушано</label>\n                <div class="form-input-container__radio">\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-artists-listened"\n                            value="false" '+(null!=(i=l(r,"if").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_artists_listened"):i,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:124,column:42},end:{line:124,column:95}}}))?i:"")+'>\n                        Приватно\n                    </label>\n                    <label class="form-input-container__radio__label">\n                        <input class="form-input-container__radio__input" type="radio" name="public-artists-listened"\n                            value="true" '+(null!=(i=l(r,"unless").call(c,null!=(i=null!=e?l(e,"user"):e)?l(i,"is_public_artists_listened"):i,{name:"unless",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:129,column:41},end:{line:129,column:102}}}))?i:"")+'>\n                        Публично\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="page--settings__bottom">\n    <button class="page--settings__bottom__button-reject form-reject-button">Удалить аккаунт</button>\n    <button class="page--settings__bottom__button-save form-apply-button">Сохранить настройки</button>\n</div>'},useData:!0})},612:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["fullscreen.hbs"]=t({compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){return'<div class="fullscreen-player__container">\n    <div class="fullscreen-player__song" id="song-container">\n        <img id="song-img">\n        <div class="fullscreen-player__song-text">\n            <span id="song-name" class="song-name">nothing</span>\n            <span id="artist-name" class="artist-name">nothing</span>\n        </div>\n        <div class="fullscreen-player__controls">\n            <img src="/static/img/player-shuffle.svg" class="icon" id="shuffle" alt="Shuffle">\n            <img src="/static/img/player-prev.svg" class="icon" id="prev" alt="Prev">\n            <img src="/static/img/player-play.svg" class="icon" id="play" alt="Play">\n            <img src="/static/img/player-next.svg" class="icon" id="next" alt="Next">\n            <img src="/static/img/player-repeat.svg" class="icon" id="repeat" alt="Repeat">\n        </div>\n    </div>\n\n\n    <div class="fullscreen-player__bottom-content">\n        <div class="fullscreen-player__progress-container">\n            <span id="current-span">0:00</span>\n            <div class="rectangle" id="play-progress">\n                <div class="rectangle-prev"></div>\n                <div class="circle"></div>\n            </div>\n            <span id="end-span">0:00</span>\n        </div>\n        <div class="fullscreen-player__tools">\n             <div class="icons">\n                <img src="/static/img/like-default.svg" class="icon" alt="Like">\n                <img src="/static/img/dots.svg" class="icon" alt="Menu">\n            </div>\n            <div class="controls">\n                <img class="icon" src="/static/img/volume.svg" alt="Volume">\n                <div class="rectangle-volume" id="volume-progress">\n                    <div class="rectangle-prev"></div>\n                    <div class="circle"></div>\n                </div>\n                <img class="icon resize" src="/static/img/minimize.svg" id="resize" alt="Fullscreen">\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},704:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e;e=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["track.hbs"]=e({1:function(t,e,r,n,o){return"track_norder"},3:function(t,e,r,n,o){return'        <img src="/static/img/like-active.svg" alt="like" class="track__like">\n'},5:function(t,e,r,n,o){return'        <img src="/static/img/like-default.svg" alt="unlike" class="track__like">\n'},compiler:[8,">= 4.3.0"],main:function(e,r,n,o,i){var a,u,c=null!=r?r:e.nullContext||{},l=e.hooks.helperMissing,s="function",f=e.escapeExpression,p=e.lambda,h=e.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="track '+(null!=(a=h(n,"unless").call(c,null!=r?h(r,"id"):r,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:60}}}))?a:"")+'">\n    <span class="track__index">'+f(t(u=null!=(u=h(n,"index")||(null!=r?h(r,"index"):r))?u:l)===s?u.call(c,{name:"index",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:40}}}):u)+'</span>\n    <div class="track__wrapper" data-type="track" data-track-id="'+f(p(null!=r?h(r,"id"):r,r))+'">\n        <img src="'+f(t(u=null!=(u=h(n,"thumbnail_url")||(null!=r?h(r,"thumbnail_url"):r))?u:l)===s?u.call(c,{name:"thumbnail_url",hash:{},data:i,loc:{start:{line:4,column:18},end:{line:4,column:35}}}):u)+'" alt="" class="track__img">\n        <img src="/static/img/play.svg" class="track__play">\n    </div>\n    <a style="cursor: not-allowed;" href="'+f(p(null!=r?h(r,"hrefAlbum"):r,r))+'" class="track__title">'+f(p(null!=r?h(r,"title"):r,r))+'</a>\n    <a href="'+f(p(null!=(a=null!=(a=null!=r?h(r,"artists"):r)?h(a,"0"):a)?h(a,"artist_page"):a,r))+'" class="track__artist">'+f(p(null!=(a=null!=(a=null!=r?h(r,"artists"):r)?h(a,"0"):a)?h(a,"title"):a,r))+'</a>\n    <a style="cursor: not-allowed;" href="'+f(p(null!=r?h(r,"hrefAlbum"):r,r))+'" class="track__album">'+f(p(null!=r?h(r,"album"):r,r))+'</a>\n    <span class="track__duration">'+f(p(null!=r?h(r,"duration"):r,r))+"</span>\n"+(null!=(a=h(n,"if").call(c,null!=r?h(r,"isLiked"):r,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))?a:"")+'    <img src="/static/img/dots.svg" alt="more" class="track__actions">\n</div>\n'},useData:!0})},806:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["musics_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"music-card"),e,{name:"music-card",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--musics">\n    <h1 class="section__title">'+u(a(null!=e?c(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+u(a(null!=e?c(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=c(r,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"musics"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},830:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["tracks_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.hooks.helperMissing,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(c(n,"track"),e,{name:"track",hash:{duration:(c(r,"convertDuration")||e&&c(e,"convertDuration")||u).call(a,null!=e?c(e,"duration"):e,{name:"convertDuration",hash:{},data:o,loc:{start:{line:6,column:52},end:{line:6,column:83}}}),index:(c(r,"add")||e&&c(e,"add")||u).call(a,o&&c(o,"index"),1,{name:"add",hash:{},data:o,loc:{start:{line:6,column:28},end:{line:6,column:42}}})},data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--tracks">\n    <h1 class="section__title">'+u(a(null!=e?c(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+u(a(null!=e?c(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=c(r,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"tracks"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})},861:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["main.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"recent"):e,href_all:"#",title:"Недавно прослушанные"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},3:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"musics-section"),e,{name:"musics-section",hash:{musics:null!=e?a(e,"loved"):e,href_all:"#",title:"Любимые треки"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},5:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"tracks-section"),e,{name:"tracks-section",hash:{tracks:null!=e?a(e,"recommendations"):e,href_all:"#",title:"Рекомендации"},data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},7:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"bottom-player"),e,{name:"bottom-player",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=null!=e?e:t.nullContext||{},u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section"> \n    <h1 class="section__title">Только для тебя</h1>\n'+(null!=(i=t.invokePartial(u(n,"collections"),e,{name:"collections",data:o,indent:"    ",helpers:r,partials:n,decorators:t.decorators}))?i:"")+"</section>\n\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recent"):e,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:6,column:0},end:{line:8,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"loved"):e,{name:"if",hash:{},fn:t.program(3,o,0),inverse:t.noop,data:o,loc:{start:{line:10,column:0},end:{line:12,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"recommendations"):e,{name:"if",hash:{},fn:t.program(5,o,0),inverse:t.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:7}}}))?i:"")+"\n"+(null!=(i=u(r,"if").call(a,null!=e?u(e,"showBottomPlayer"):e,{name:"if",hash:{},fn:t.program(7,o,0),inverse:t.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?i:"")+"\n"},usePartial:!0,useData:!0})},986:()=>{var t;t=Handlebars.template,(Handlebars.templates=Handlebars.templates||{})["artists_section.hbs"]=t({1:function(t,e,r,n,o){var i,a=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(i=t.invokePartial(a(n,"artist-card"),e,{name:"artist-card",data:o,indent:"            ",helpers:r,partials:n,decorators:t.decorators}))?i:""},compiler:[8,">= 4.3.0"],main:function(t,e,r,n,o){var i,a=t.lambda,u=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<section class="section section--artists">\n    <h1 class="section__title">'+u(a(null!=e?c(e,"title"):e,e))+'</h1>\n    <a class="section__all" href="'+u(a(null!=e?c(e,"href_all"):e,e))+'">Показать все</a>\n    <div class="section__content">\n'+(null!=(i=c(r,"each").call(null!=e?e:t.nullContext||{},null!=e?c(e,"artists"):e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:17}}}))?i:"")+"    </div>\n</section>"},usePartial:!0,useData:!0})}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e,r){return(e=c(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var l=function(){function t(e,r){o(this,t),this._path=e,r&&(this._build=r)}return a(t,[{key:"_build",value:function(t){throw new Error("Not implemented")}},{key:"math",value:function(e){return e.match(this._path+t.path_append)}},{key:"build",value:function(t){var e=this._build(t);if(!this.math(e))throw new Error('Route "'.concat(this._path,'" does not match builded "').concat(e,'"'));return e}},{key:"path",get:function(){return this._path}},{key:"toString",value:function(){return this._path}}])}();u(l,"path_append","(?!\\w)");var s=function(){return a((function t(){var e=this;o(this,t),u(this,"_href","http://null.null/"),u(this,"_callbacks",new Map),this._href=location.href,window.addEventListener("popstate",(function(t){e.setUrl(location.href)}))}),[{key:"setUrl",value:function(t){var e=this.getRoute();this._href=t,this.callCallbacks(e,this.getRoute())}},{key:"addCallback",value:function(t,e){this._callbacks.set(t,this._callbacks.get(t)||[]),this._callbacks.get(t).push(e)}},{key:"removeCallback",value:function(t,e){this._callbacks.set(t,this._callbacks.get(t).filter((function(t){return t!==e}))),0===this._callbacks.get(t).length&&this._callbacks.delete(t)}},{key:"callCallback",value:function(t,e){var r,n=this,o=null!==(r=t.math(this.getRoute()))&&void 0!==r?r:[""];setTimeout((function(){return e.onRoute({route:t,params:o,searchParams:n.getSearch(),data:history.state})}))}},{key:"callCallbacks",value:function(t,r){var n,o=this,i=function(t){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(this._callbacks.entries());try{var a=function(){var i,a,u=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.value,2),c=u[0],l=u[1],s=null!==(i=c.math(t))&&void 0!==i?i:[""],f=null!==(a=c.math(r))&&void 0!==a?a:[""];s[0]!==f[0]&&l.forEach((function(t){return setTimeout((function(){return t.onRoute({route:c,params:f,searchParams:o.getSearch(),data:history.state})}))}))};for(i.s();!(n=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}},{key:"pushUrl",value:function(t,e){t=new URL(t,this._href).href,history.pushState(e,"",t),this.setUrl(t)}},{key:"replaceUrl",value:function(t,e){t=new URL(t,this._href).href,history.replaceState(e,"",t),this.setUrl(t)}},{key:"joinUrl",value:function(t,e){this.pushUrl(new URL(t,this._href).href,e)}},{key:"getRoute",value:function(){return this._href.match(/\/\/.*?(\/.*)/)[1]}},{key:"getPath",value:function(){return new URL(this._href).pathname}},{key:"getSearch",value:function(){return new URL(this._href).searchParams}},{key:"getHash",value:function(){return new URL(this._href).hash}}])}();const f=new s;function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}var d=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.callbacks=[]},(e=[{key:"addCallback",value:function(t){this.callbacks.push(t),console.log("Added callback [".concat(t,"] to ").concat(this.constructor.name,", total: [").concat(this.callbacks,"]"))}},{key:"removeCallbacks",value:function(t){this.callbacks=this.callbacks.filter((function(e){return-1===t.indexOf(e)})),console.log("Removed [".concat(t,"] callbacks from ").concat(this.constructor.name,", left: [").concat(this.callbacks,"]"))}},{key:"setState",value:function(t){var e=this,r=this.value;this.value=t,this.callbacks.slice().reverse().forEach((function(t){console.log('Calling callback "'.concat(t,'" for ').concat(e.constructor.name)),t(e,r,e.value)}))}},{key:"getState",value:function(){return this.value}}])&&h(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return k(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function E(t,e,r){return e&&O(t.prototype,e),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}var L,j,S=function(){return E((function t(){x(this,t),this._element=this.constructor.BASE_ELEMENT_FUNCTION(),this._element.rzf_component=this,this.states=new Map,this.init.apply(this,arguments),this.build()}),[{key:"element",get:function(){return this._element}},{key:"createState",value:function(t){var e=this,r=new d(t);return this.createCallback(r,(function(t,r,n){return e.render(t,r,n)})),r}},{key:"createCallback",value:function(t,e){console.log('Created callback "'.concat(e,'" on ').concat(t.constructor.name," for ").concat(this.constructor.name)),this.states.set(t,this.states.get(t)||[]),this.states.get(t).push(e),t.addCallback(e)}},{key:"destroy",value:function(){this._element.remove();var t,e=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(this.states.entries());try{for(e.s();!(t=e.n()).done;){var r=w(t.value,2),n=r[0],o=r[1];console.log("Removing [".concat(o,"] callbacks from ").concat(n.constructor.name," for ").concat(this.constructor.name)),n.removeCallbacks(o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"init",value:function(){}},{key:"build",value:function(){}},{key:"render",value:function(t,e,r){}}],[{key:"BASE_ELEMENT_FUNCTION",value:function(){return document.createElement(this.BASE_ELEMENT)}}])}();L=S,(j=P(j="BASE_ELEMENT"))in L?Object.defineProperty(L,j,{value:"div",enumerable:!0,configurable:!0,writable:!0}):L[j]="div";var T=function(t){function e(){var t;return x(this,e),(t=function(t,e,r){return e=b(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r))}(this,e)).observer=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.removedNodes.forEach((function(t){t.rzf_component&&t.rzf_component.destroy()}))}))})),t.observer.observe(t.element,{childList:!0,subtree:!0}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(e,t),E(e,null,[{key:"BASE_ELEMENT_FUNCTION",value:function(){var t;return null!==(t=document.getElementById("root"))&&void 0!==t?t:function(){throw new Error("Root element not found")}()}}])}(S),H={pageRoute:new l("^/(tracks|albums|artists|profile|)"),artistsRoute:new l("^/artists/([0-9]+)|^/artists",(function(t){return"/artists/".concat(t.artist_id)})),profileRoute:new l("^/profile/([^/]+|settings)|^/profile",(function(t){return"/profile/".concat(t.username)})),authRoute:new l("#(login|register)"),logoutRoute:new l("/logout")};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(){A=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==C(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function G(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){G(i,n,o,a,u,"next",t)}function u(t){G(i,n,o,a,u,"throw",t)}a(void 0)}))}}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F(n.key),n)}}function I(t,e,r){return(e=F(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){return r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"get",value:function(){var e=M(A().mark((function e(r){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r);case 2:return n=e.sent,e.next=5,t.processResponse(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:(x=M(A().mark((function e(r,n){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return o=e.sent,e.next=5,t.processResponse(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(t,e){return x.apply(this,arguments)})},{key:"postMultipart",value:(k=M(A().mark((function e(r,n){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r,{method:"POST",body:n});case 2:return o=e.sent,e.next=5,t.processResponse(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(t,e){return k.apply(this,arguments)})},{key:"put",value:(_=M(A().mark((function e(r,n){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return o=e.sent,e.next=5,t.processResponse(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(t,e){return _.apply(this,arguments)})},{key:"delete",value:(w=M(A().mark((function e(r,n){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+r,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return o=e.sent,e.next=5,t.processResponse(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(t,e){return w.apply(this,arguments)})},{key:"processResponse",value:(g=M(A().mark((function t(e){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=2;break}throw new Error(e.statusText);case 2:return t.next=4,e.json();case 4:if(!(r=t.sent).error){t.next=7;break}throw new Error(r.status+": "+r.error);case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)}))),function(t){return g.apply(this,arguments)})},{key:"getTracks",value:(b=M(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/tracks?limit=20");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendTrack(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})},{key:"getTrack",value:(m=M(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/tracks/".concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return m.apply(this,arguments)})},{key:"getAlbums",value:(v=M(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/albums");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendAlbum(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"getArtists",value:(d=M(A().mark((function e(){var r,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists");case 2:return(r=e.sent).body=r.body.map((function(t){return n.extendArtist(t)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"getArtist",value:(y=M(A().mark((function e(r){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r));case 2:return(n=e.sent).body=this.extendArtist(n.body),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(t){return y.apply(this,arguments)})},{key:"getArtistTracks",value:(h=M(A().mark((function e(r){var n,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r,"/tracks"));case 2:return(n=e.sent).body=n.body.map((function(t){return o.extendTrack(t)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(t){return h.apply(this,arguments)})},{key:"getArtistAlbums",value:(p=M(A().mark((function e(r){var n,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/artists/".concat(r,"/albums"));case 2:return(n=e.sent).body=n.body.map((function(t){return o.extendAlbum(t)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(t){return p.apply(this,arguments)})},{key:"getPlaylists",value:(f=M(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/playlists");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"postSignup",value:(s=M(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/signup",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return s.apply(this,arguments)})},{key:"postLogin",value:(l=M(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/login",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return l.apply(this,arguments)})},{key:"postLogout",value:(c=M(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/logout",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"getCurrentUser",value:(u=M(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/auth/check");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"getUser",value:(a=M(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/user/".concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)})},{key:"updateUser",value:(i=M(A().mark((function e(r,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/user/".concat(r),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,e){return i.apply(this,arguments)})},{key:"updateAvatar",value:(o=M(A().mark((function e(r,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postMultipart("/user/".concat(r,"/avatar"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,e){return o.apply(this,arguments)})},{key:"deleteUser",value:(n=M(A().mark((function e(r,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete("/user/".concat(r),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"extendTrack",value:function(t){var e=this;return R(R({},t),{},{artists:t.artists.map((function(t){return e.extendArtist(t)}))})}},{key:"createStream",value:(r=M(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/tracks/".concat(r,"/stream"),{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)})},{key:"updateStream",value:(e=M(A().mark((function e(r,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/streams/".concat(r),{duration:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})},{key:"extendAlbum",value:function(t){var e=this;return R(R({},t),{},{artists:t.artists.map((function(t){return e.extendArtist(t)}))})}},{key:"extendArtist",value:function(t){return R(R({},t),{},{artist_page:H.artistsRoute.build({artist_id:t.id})})}}]);var e,r,n,o,i,a,u,c,l,s,f,p,h,y,d,v,m,b,g,w,_,k,x}();I(B,"baseUrl","/api/v1");var q=new d(null);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y=function(){return!!t})()}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function J(t,e,r){return(e=X(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}B.getCurrentUser().then((function(t){q.setState(t.body)})).catch((function(){return q.setState(null)})),r(437);var $={"/":{text:"Главная",href:"/",icon:"/static/img/icon-home.svg"},"/tracks":{text:"Треки",href:"/tracks",icon:"/static/img/icon-tracks.svg"},"/albums":{text:"Альбомы",href:"/albums",icon:"/static/img/icon-albums.svg"},"/artists":{text:"Артисты",href:"/artists",icon:"/static/img/icon-artists.svg"}},K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=V(e),function(t,e){if(e&&("object"==U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y()?Reflect.construct(e,r||[],V(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),function(t,e){return e&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){var t=this;this.element.classList.add("header"),this.active=this.createState(null),this.createCallback(q,(function(){return t.build()})),f.addCallback(H.pageRoute,this),f.addCallback(H.authRoute,this)}},{key:"build",value:function(){this.element.innerHTML="",this.element.insertAdjacentHTML("beforeend",e.template({navItems:$,user:q.getState()})),f.callCallback(H.pageRoute,this),f.callCallback(H.authRoute,this)}},{key:"render",value:function(t,e,r){t===this.active&&(e&&e.classList.remove("active"),r&&r.classList.add("active"))}},{key:"destroy",value:function(){f.removeCallback(H.pageRoute,this)}},{key:"onRoute",value:function(t){var e,r,n,o=t.route,i=t.params;switch(o){case H.pageRoute:this.active.setState(null===(e=(r=this.element).querySelector)||void 0===e||null===(e=e.call(r,'.header__nav li>a[href="'.concat(i[0],'"]')))||void 0===e?void 0:e.parentElement);break;case H.authRoute:this.element.querySelectorAll(".header__auth>a").forEach((function(t){t.classList.remove("active")})),null===(n=this.element.querySelector('.header__auth>a[href="#'.concat(i[1],'"]')))||void 0===n||n.classList.add("active")}}}])}(S);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tt=function(){return!!t})()}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function nt(t,e,r){return(e=ot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ot(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}J(K,"BASE_ELEMENT","header"),J(K,"template",Handlebars.templates["header.hbs"]),r(301);var it=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=et(e),function(t,e){if(e&&("object"==W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tt()?Reflect.construct(e,r||[],et(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(e,t),function(t,e){return e&&Z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.id="playlists-panel"}},{key:"build",value:function(){this.element.innerHTML=e.template({playlists:[]})}}])}(S);function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(at(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ct(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ct(i,n,o,a,u,"next",t)}function u(t){ct(i,n,o,a,u,"throw",t)}a(void 0)}))}}function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function ft(t){var e=function(t){if("object"!=at(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:e+""}nt(it,"BASE_ELEMENT","section"),nt(it,"template",Handlebars.templates["playlists.hbs"]),r(10),r(612);var pt=function(){return function(t,e){return e&&st(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(e=ft(e))in t?Object.defineProperty(t,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[e]=null}(this,"playPromise"),t.instance)return t.instance;t.instance=this,this.audio=document.createElement("audio"),this.initStates(),this.setVolume(this.audioLevel),this.setCurrentTime(this.currentTime)}),[{key:"initStates",value:function(){try{this.audioLevel=Number(localStorage.getItem("audio-level")),this.audio.currentTime=Number(localStorage.getItem("audio-current-time"))}catch(t){console.error("Failed to get states for audio:",t),this.audioLevel=.5;try{localStorage.setItem("audio-level",String(this.audioLevel))}catch(t){console.error("Failed to save audio level:",t)}}this.duration=0}},{key:"togglePlay",value:(n=lt(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.audio.paused){t.next=6;break}return t.next=4,this.play();case 4:t.next=7;break;case 6:this.pause();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return n.apply(this,arguments)})},{key:"play",value:(r=lt(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playPromise=this.audio.play(),t.abrupt("return",this.playPromise.then((function(){})).catch((function(t){throw t})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"pause",value:function(){this.playPromise&&this.playPromise.catch((function(){})),this.audio.pause()}},{key:"setTrack",value:function(t){this.audio.src=t}},{key:"setVolume",value:function(t){this.audioLevel=t,this.audio.volume=t,this.SaveVolume()}},{key:"SaveVolume",value:(e=lt(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{localStorage.setItem("audio-level",String(this.audioLevel))}catch(t){console.error("Failed to save audio level:",t)}case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setCurrentTime",value:function(t){this.currentTime=t,this.SaveCurrentTime()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"SaveCurrentTime",value:(t=lt(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{localStorage.setItem("audio-current-time",String(this.currentTime))}catch(t){console.error("Failed to save audio current time:",t)}case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setDuration",value:function(t){this.duration=t}}]);var t,e,r,n}();const ht=new pt;function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function dt(){dt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==yt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yt(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function vt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vt(i,n,o,a,u,"next",t)}function u(t){vt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wt(n.key),n)}}function wt(t){var e=function(t){if("object"!=yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}var _t=function(){return function(t,e){return e&&gt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;t.instance=this,ht.audio.addEventListener("ended",(function(){return e.nextTrack()})),this.queue=[],this.savedQueue=[],this.idx=-1,this.shuffled=!1,this.repeated=!1,this.playerCallback=function(){};try{localStorage.getItem("queue")?(this.queue=JSON.parse(localStorage.getItem("queue")),this.savedQueue=JSON.parse(localStorage.getItem("saved-queue")),this.idx=Number(localStorage.getItem("queue-idx")),this.shuffled=JSON.parse(localStorage.getItem("queue-shuffled")),this.repeated=JSON.parse(localStorage.getItem("queue-repeated")),this.setTrack()):(this.saveQueue(),this.saveRepated())}catch(t){console.error("Failed to get queue:",t)}}),[{key:"setPlayerCallback",value:function(t){this.playerCallback=t}},{key:"callPlayerCallback",value:function(t){if("function"==typeof this.playerCallback)try{this.playerCallback(t)}catch(t){console.error("Error in player callback:",t)}else console.error("Player callback is not a function")}},{key:"addTrack",value:function(t,e){if(Array.isArray(t)){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;this.queue.push(o)}}catch(t){n.e(t)}finally{n.f()}}else this.queue.push(t);if(-1===this.idx){if(e&&(this.idx=e-1),this.repeated)return void this.nextTrack("start");this.nextTrack()}}},{key:"saveQueue",value:(r=mt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{localStorage.setItem("queue",JSON.stringify(this.queue)),localStorage.setItem("saved-queue",JSON.stringify(this.savedQueue)),localStorage.setItem("queue-idx",String(this.idx)),localStorage.setItem("queue-shuffled",String(this.shuffled))}catch(t){console.error("Failed to save queue:",t)}case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"saveRepated",value:(e=mt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{localStorage.setItem("queue-repeated",String(this.repeated))}catch(t){console.error("Failed to save queue:",t)}case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setTrack",value:(t=mt(dt().mark((function t(){var e,r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getTrack(Number(this.queue[this.idx]));case 2:e=t.sent.body,console.log("Playing: ".concat(e.title)),ht.setTrack(e.file_url),ht.setDuration(e.duration),r={name:e.title,artist:e.artists[0].title,duration:e.duration,image:e.thumbnail_url,src:e.file_url,id:e.id},this.currentTrack=r,this.callPlayerCallback(r),this.saveQueue();case 10:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"nextTrack",value:function(t){if(t||!this.repeated)return this.idx=(this.idx+1)%this.queue.length,void this.setTrack();this.setTrack()}},{key:"previousTrack",value:function(){this.idx=Math.max(this.idx-1,0),this.setTrack()}},{key:"repeat",value:function(){this.repeated=!0,this.saveRepated()}},{key:"unrepeat",value:function(){this.repeated=!1,this.saveRepated()}},{key:"shuffle",value:function(){if(!this.shuffled){for(var t=this.queue[this.idx],e=0;e<this.queue.length;e++)this.savedQueue[e]=this.queue[e];for(var r=0;r<this.queue.length;r++){var n=Math.floor(Math.random()*(r+1)),o=[this.queue[n],this.queue[r]];this.queue[r]=o[0],this.queue[n]=o[1]}this.idx=this.queue.indexOf(t),this.shuffled=!0,this.saveQueue()}}},{key:"unshuffle",value:function(){if(this.shuffled){for(var t=this.queue[this.idx],e=0;e<this.queue.length;e++)this.queue[e]=this.savedQueue[e];this.idx=this.queue.indexOf(t),this.shuffled=!1,this.saveQueue()}}},{key:"getCurrentTrackId",value:function(){return-1==this.idx?null:this.queue[this.idx]}},{key:"getCurrentTrack",value:function(){return this.currentTrack}},{key:"clearQueue",value:function(){this.queue=[],this.savedQueue=[],this.idx=-1,this.shuffled=!1}}]);var t,e,r}();const kt=new _t;function xt(t){var e=Math.floor(t/60),r=Math.floor(t%60);return"".concat(e,":").concat(r.toString().padStart(2,"0"))}function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pt(n.key),n)}}function Pt(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}var Lt=function(){return function(t,e){return e&&Et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.fullProgress=r,this.progress=n,this.circle=o,this.isDragging=!1,this.type=i,"volume"==this.type&&this.updateProgress()}),[{key:"stopDragging",value:function(t){if(this.isDragging){this.isDragging=!1,this.fullProgress.classList.remove("dragging");var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;"play"==this.type&&(this.player.audio.currentTime=r*this.player.audio.duration),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"handleDrag",value:function(t){if(this.isDragging){var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;r=Math.max(0,Math.min(1,r)),this.progress.style.width="".concat(100*r,"%"),this.circle.style.left="".concat(100*r-1,"%"),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"startDragging",value:function(t){this.isDragging=!0,this.fullProgress.classList.add("dragging")}},{key:"handleProgressClick",value:function(t){if(!this.isDragging){var e=this.fullProgress.getBoundingClientRect(),r=(t.clientX-e.left)/e.width;"play"==this.type&&(this.player.audio.currentTime=r*this.player.audio.duration),"volume"==this.type&&this.player.setVolume(Math.max(0,Math.min(1,r)))}}},{key:"updateProgress",value:function(){if(!this.isDragging&&"play"==this.type&&this.player.duration){var t=this.player.audio.currentTime/this.player.duration*100;this.progress.style.width="".concat(t,"%"),this.circle.style.left="".concat(t-1,"%"),this.player.setCurrentTime(this.player.audio.currentTime)}if(!this.isDragging&&"volume"==this.type){var e=100*this.player.audio.volume;this.progress.style.width="".concat(e,"%"),this.circle.style.left="".concat(e-1,"%"),this.player.setVolume(this.player.audio.volume)}}}])}();const jt=Lt;function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nt(n.key),n)}}function Ct(t,e,r){return e&&Ht(t.prototype,e),r&&Ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nt(t){var e=function(t){if("object"!=St(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}var Rt=function(){return Ct((function t(e){Tt(this,t),this.root=e,this.initElements()}),[{key:"initElements",value:function(){this.playBtn=this.getElement("#play"),this.nextBtn=this.getElement("#next"),this.prevBtn=this.getElement("#prev"),this.shuffleBtn=this.getElement("#shuffle"),this.repeatBtn=this.getElement("#repeat"),this.songImg=this.getElement("#song-img"),this.songName=this.getElement("#song-name"),this.songArtist=this.getElement("#artist-name"),this.playProgress=this.getElement("#play-progress"),this.progressBar=this.playProgress.querySelector(".rectangle-prev"),this.progressCircle=this.playProgress.querySelector(".circle"),this.volumeProgress=this.getElement("#volume-progress"),this.volumeBar=this.volumeProgress.querySelector(".rectangle-prev"),this.volumeCircle=this.volumeProgress.querySelector(".circle"),this.currentSpan=this.getElement("#current-span"),this.endSpan=this.getElement("#end-span"),this.resizeBtn=this.getElement("#resize")}},{key:"getElement",value:function(t){return this.root.querySelector(t)}}])}(),At=function(){return Ct((function t(e,r){Tt(this,t),this.player=e,this.dom=r,this.playDragging=new jt(e,r.playProgress,r.progressBar,r.progressCircle,"play"),this.volumeDragging=new jt(e,r.volumeProgress,r.volumeBar,r.volumeCircle,"volume")}),[{key:"initPlayDrag",value:function(){this.initDragHandlers(this.dom.playProgress,this.playDragging)}},{key:"initVolumeDrag",value:function(){this.initDragHandlers(this.dom.volumeProgress,this.volumeDragging)}},{key:"initDragHandlers",value:function(t,e){t.addEventListener("click",(function(t){return e.handleProgressClick(t)})),t.addEventListener("mousedown",(function(t){return e.startDragging(t)})),document.addEventListener("mousemove",(function(t){return e.handleDrag(t)})),document.addEventListener("mouseup",(function(t){return e.stopDragging(t)}))}}])}(),Gt=function(){return Ct((function t(e,r){Tt(this,t),this.dom=e,this.tracksQueue=r}),[{key:"initHoverEffects",value:function(){this.initButtonHover(this.dom.nextBtn,"player-next"),this.initButtonHover(this.dom.prevBtn,"player-prev")}},{key:"initButtonHover",value:function(t,e){t.addEventListener("mouseover",(function(){return t.src="/static/img/".concat(e,"-hover.svg")})),t.addEventListener("mouseout",(function(){return t.src="/static/img/".concat(e,".svg")}))}},{key:"initShuffleHandler",value:function(){var t=this;this.dom.shuffleBtn.addEventListener("mouseover",(function(){return t.handleShuffleHover()})),this.dom.shuffleBtn.addEventListener("mouseout",(function(){return t.handleShuffleHoverOut()})),this.dom.shuffleBtn.addEventListener("click",(function(){return t.toggleShuffle()}))}},{key:"handleShuffleHover",value:function(){this.tracksQueue.shuffled||(this.dom.shuffleBtn.src="/static/img/player-shuffle-hover.svg")}},{key:"handleShuffleHoverOut",value:function(){this.tracksQueue.shuffled||(this.dom.shuffleBtn.src="/static/img/player-shuffle.svg")}},{key:"toggleShuffle",value:function(){null!=kt.getCurrentTrackId()&&(this.tracksQueue.shuffled?this.tracksQueue.unshuffle():this.tracksQueue.shuffle(),this.checkShuffle())}},{key:"checkShuffle",value:function(){this.dom.shuffleBtn.src=this.tracksQueue.shuffled?"/static/img/player-shuffle-active.svg":"/static/img/player-shuffle.svg"}},{key:"initRepeatHandler",value:function(){var t=this;this.dom.repeatBtn.addEventListener("mouseover",(function(){return t.handleRepeatHover()})),this.dom.repeatBtn.addEventListener("mouseout",(function(){return t.handleRepeatHoverOut()})),this.dom.repeatBtn.addEventListener("click",(function(){return t.toggleRepeat()}))}},{key:"handleRepeatHover",value:function(){this.tracksQueue.repeated||(this.dom.repeatBtn.src="/static/img/player-repeat-hover.svg")}},{key:"handleRepeatHoverOut",value:function(){this.tracksQueue.repeated||(this.dom.repeatBtn.src="/static/img/player-repeat.svg")}},{key:"toggleRepeat",value:function(){null!=kt.getCurrentTrackId()&&(this.tracksQueue.repeated?this.tracksQueue.unrepeat():this.tracksQueue.repeat(),this.checkRepeat())}},{key:"checkRepeat",value:function(){this.dom.repeatBtn.src=this.tracksQueue.repeated?"/static/img/player-repeat-active.svg":"/static/img/player-repeat.svg"}}])}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Dt(){Dt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Mt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Mt(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function It(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Ft(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,u,"next",t)}function u(t){It(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jt(n.key),n)}}function Ut(t,e,r){return e&&qt(t.prototype,e),r&&qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qt=function(){return!!t})()}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}function Vt(t,e){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vt(t,e)}function zt(t,e,r){return(e=Jt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jt(t){var e=function(t){if("object"!=Mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mt(e)?e:e+""}var Xt=function(t){function e(){return Bt(this,e),function(t,e,r){return e=Yt(e),function(t,e){if(e&&("object"==Mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qt()?Reflect.construct(e,r||[],Yt(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vt(t,e)}(e,t),Ut(e,[{key:"init",value:function(){var t=this;if(e.instance)return e.instance;e.instance=this,this.element.id="player",this.size=this.createState("small"),this.createCallback(this.size,(function(){return t.build()})),this.stream=new $t}},{key:"build",value:function(){var t=this;switch(this.size.getState()){case"small":this.element.classList.remove("fullscreen-player"),this.element.classList.add("small-player"),this.element.innerHTML="",this.element.insertAdjacentHTML("beforeend",e.smallTemplate({})),this.player=ht,this.tracksQueue=kt,this.tracksQueue.setPlayerCallback((function(e){return t.switchingTrack(e)})),this.domManager=new Rt(this.element),this.timeManager=new Wt(this.player,this.domManager),this.dragHandler=new At(this.player,this.domManager),this.buttonStateHandler=new Gt(this.domManager,this.tracksQueue),this.eventManager=new Kt(this.player,this.tracksQueue,this.domManager,this.dragHandler,this.buttonStateHandler,this),this.updateMusicDom(kt.getCurrentTrack());break;case"fullscreen":this.element.classList.remove("small-player"),this.element.classList.add("fullscreen-player"),this.element.innerHTML="",this.element.insertAdjacentHTML("beforeend",e.fullscreenTemplate({})),this.player=ht,this.tracksQueue=kt,this.tracksQueue.setPlayerCallback((function(e){return t.switchingTrack(e)})),this.domManager=new Rt(this.element),this.timeManager=new Wt(this.player,this.domManager),this.dragHandler=new At(this.player,this.domManager),this.buttonStateHandler=new Gt(this.domManager,this.tracksQueue),this.eventManager=new Kt(this.player,this.tracksQueue,this.domManager,this.dragHandler,this.buttonStateHandler,this),this.updateMusicDom(kt.getCurrentTrack())}}},{key:"toggleState",value:function(){"small"===this.size.getState()?this.size.setState("fullscreen"):this.size.setState("small")}},{key:"setDuration",value:function(t){this.domManager.endSpan.innerHTML=xt(t)}},{key:"setCurrentDuration",value:function(){var t=this.player.audio.currentTime||0;this.domManager.currentSpan.innerHTML=xt(t),this.stream.duration+=1}},{key:"togglePlay",value:(n=Ft(Dt().mark((function t(){return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=kt.getCurrentTrackId()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.player.togglePlay();case 5:return t.next=7,this.setPlayButtonState();case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Ошибка воспроизведения:",t.t0),this.domManager.playBtn.src="/static/img/player-play.svg";case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return n.apply(this,arguments)})},{key:"setPlayButtonState",value:(r=Ft(Dt().mark((function t(){return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.domManager.playBtn.src=this.player.audio.paused?"/static/img/player-play.svg":"/static/img/player-pause.svg";case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"switchingTrack",value:function(t){this.updateMusicDom(t),this.togglePlay(),this.stream.updateStream(),this.stream.createStream()}},{key:"updateMusicDom",value:function(t){t&&(this.dragHandler.playDragging.updateProgress(),this.domManager.songImg.src=t.image,this.domManager.songName.innerText=t.name,this.domManager.songArtist.innerText=t.artist,this.setDuration(t.duration),this.setPlayButtonState(),this.player.getCurrentTime(),this.setCurrentDuration(),this.buttonStateHandler.checkShuffle(),this.buttonStateHandler.checkRepeat())}}]);var r,n}(S);zt(Xt,"BASE_ELEMENT","div"),zt(Xt,"smallTemplate",Handlebars.templates["small.hbs"]),zt(Xt,"fullscreenTemplate",Handlebars.templates["fullscreen.hbs"]);var $t=function(){return Ut((function t(){Bt(this,t),this.duration=0}),[{key:"createStream",value:(e=Ft(Dt().mark((function t(){var e,r;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Number(kt.getCurrentTrackId()),t.next=3,B.createStream(e);case 3:r=t.sent,console.warn(r),this.id=r.body.id,this.duration=0;case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"updateStream",value:(t=Ft(Dt().mark((function t(){var e;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,B.updateStream(this.id,this.duration);case 4:e=t.sent,console.warn(e),console.warn(this.id,this.duration);case 7:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e}(),Kt=function(){return Ut((function t(e,r,n,o,i,a){Bt(this,t),zt(this,"handlers",[]),this.player=e,this.tracksQueue=r,this.dom=n,this.dragHandler=o,this.buttonStateHandler=i,this.bottomPlayer=a,this.initPlayerEvents(),this.initButtonEvents(),this.initDragEvents(),this.initImageEvents()}),[{key:"initPlayerEvents",value:function(){var t=this,e=function(){t.dragHandler.playDragging.updateProgress(),t.bottomPlayer.setCurrentDuration()};this.player.audio.addEventListener("timeupdate",e),this.handlers.push((function(){t.player.audio.removeEventListener("timeupdate",e)}));var r=function(){return t.dragHandler.volumeDragging.updateProgress()};this.player.audio.addEventListener("volumechange",r),this.handlers.push((function(){t.player.audio.removeEventListener("volumechange",r)}))}},{key:"initButtonEvents",value:function(){var t=this;this.dom.playBtn.addEventListener("click",(function(){return t.bottomPlayer.togglePlay()})),this.dom.nextBtn.addEventListener("click",(function(){null!=kt.getCurrentTrackId()&&t.tracksQueue.nextTrack("nextBtn")})),this.dom.prevBtn.addEventListener("click",(function(){null!=kt.getCurrentTrackId()&&t.tracksQueue.previousTrack()})),this.dom.resizeBtn.addEventListener("click",(function(){return t.bottomPlayer.toggleState()}))}},{key:"initDragEvents",value:function(){this.dragHandler.initPlayDrag(),this.dragHandler.initVolumeDrag()}},{key:"initImageEvents",value:function(){this.buttonStateHandler.initHoverEffects(),this.buttonStateHandler.initShuffleHandler(),this.buttonStateHandler.initRepeatHandler()}},{key:"destroy",value:function(){this.handlers.forEach((function(t){return t()}))}}])}(),Wt=Ut((function t(e,r){Bt(this,t),this.player=e,this.dom=r,this.dom.endSpan.innerHTML=xt(this.player.duration)}));const Zt=new Xt;function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(){ee=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==te(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(te(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function re(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function oe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oe=function(){return!!t})()}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ie(t)}function ae(t,e){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ae(t,e)}function ue(t){var e=function(t){if("object"!=te(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:e+""}r(861),r(150),Handlebars.registerPartial("music-card",Handlebars.templates["music-card.hbs"]),r(806),Handlebars.registerPartial("musics-section",Handlebars.templates["musics_section.hbs"]),r(704),Handlebars.registerPartial("track",Handlebars.templates["track.hbs"]),Handlebars.registerHelper("add",(function(t,e){return t+e})),Handlebars.registerHelper("convertDuration",(function(t){return xt(t)})),r(830),Handlebars.registerPartial("tracks-section",Handlebars.templates["tracks_section.hbs"]);var ce=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=ie(e),function(t,e){if(e&&("object"==te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oe()?Reflect.construct(e,r||[],ie(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ae(t,e)}(e,t),function(t,e){return e&&ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=ee().mark((function t(){var n,o;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getTracks();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){re(i,n,o,a,u,"next",t)}function u(t){re(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}])}(S);function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function se(){se=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==le(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(le(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function fe(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ve(n.key),n)}}function he(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(he=function(){return!!t})()}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ye(t)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},de(t,e)}function ve(t){var e=function(t){if("object"!=le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:e+""}!function(t,e,r){(e=ue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(ce,"template",Handlebars.templates["main.hbs"]),r(35);var me=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=ye(e),function(t,e){if(e&&("object"==le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,he()?Reflect.construct(e,r||[],ye(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(e,t),function(t,e){return e&&pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=se().mark((function t(){var n,o;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getTracks();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){fe(i,n,o,a,u,"next",t)}function u(t){fe(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}])}(S);function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function ge(){ge=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==be(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(be(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function we(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ke=function(){return!!t})()}function xe(t){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xe(t)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oe(t,e)}function Ee(t){var e=function(t){if("object"!=be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:e+""}!function(t,e,r){(e=ve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(me,"template",Handlebars.templates["tracks.hbs"]),r(67),r(520),Handlebars.registerPartial("album",Handlebars.templates["album.hbs"]),r(110),Handlebars.registerPartial("album-card",Handlebars.templates["album-card.hbs"]),r(14),Handlebars.registerPartial("albums-section",Handlebars.templates["albums_section.hbs"]),r(124),Handlebars.registerPartial("albums-card-section",Handlebars.templates["albums-card_section.hbs"]),r(221),Handlebars.registerPartial("collections",Handlebars.templates["collections.hbs"]);var Pe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=xe(e),function(t,e){if(e&&("object"==be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ke()?Reflect.construct(e,r||[],xe(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(e,t),function(t,e){return e&&_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=ge().mark((function t(){var n,o;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getAlbums();case 3:n=t.sent.body,o={loved:n,recent:n,recommendations:n,user:q.getState()},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){we(i,n,o,a,u,"next",t)}function u(t){we(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}])}(S);function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Te(n.key),n)}}function Se(t,e,r){return e&&je(t.prototype,e),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Te(t){var e=function(t){if("object"!=Le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Le(e)?e:e+""}function He(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ce(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}!function(t,e,r){(e=Ee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Pe,"template",Handlebars.templates["albums.hbs"]),r(567);var Ne=new Set(He("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")),Re=new Set([].concat(He(Ne),["_"],He("0123456789"))),Ae=new Set([].concat(He(Re),He("@#!."))),Ge=/.+@.+\..+/i;function Me(t){return He(t).every((function(t){return Re.has(t)}))}function De(t){return He(t).every((function(t){return Ae.has(t)}))}function Ie(t){return He(t).some((function(t){return Ne.has(t)}))}var Fe=new(Se((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.password={minLength:4,maxLength:25,containsLetter:Ie,containsValidChars:Me,errorMessages:{length:"Пароль должен быть от 4 до 25 символов",containsLetter:"Пароль должен содержать хотя бы одну букву",containsValidChars:"Пароль может содержать только латинские буквы, цифры и подчеркивания"}},this.passwordRepeat={minLength:4,maxLength:25,match:function(t,e){return t===e},errorMessages:{length:"Пароли не совпадают",match:"Пароли не совпадают"}},this.username={minLength:3,maxLength:20,containsLetter:Ie,containsValidChars:Me,errorMessages:{length:"Логин должен быть от 3 до 20 символов",containsLetter:"Логин должен содержать хотя бы одну букву",containsValidChars:"Логин может содержать только латинские буквы, цифры и подчеркивания"}},this.email={minLength:5,maxLength:30,containsValidChars:De,match:function(t){return Ge.test(t)},errorMessages:{length:"Email должен быть от 5 до 30 символов",containsValidChars:"Введите корректный email",match:"Введите корректный email"}},this.identifier={minLength:3,maxLength:30,containsValidChars:De,errorMessages:{}}})));function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ue(n.key),n)}}function Ue(t){var e=function(t){if("object"!=Be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Be(e)?e:e+""}var Qe=function(){return function(t,e){return e&&qe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.input=r,this.loginForm=n,this.inputHTML=this.form.querySelector('[name="'.concat(this.input.name,'"]')),this.validationMessage=this.form.querySelector('[name="'.concat(this.input.name,'-error"]')),this.inputHTML.addEventListener("input",this.inputListener.bind(this)),this.valid=!1,this.error=null}),[{key:"setState",value:function(t,e){this.valid=t,this.error=e,this.mark()}},{key:"mark",value:function(){if(this.validationMessage&&!this.loginForm){if(!this.valid)return this.validationMessage.textContent=this.error,void this.inputHTML.classList.add("border-error");this.validationMessage.textContent=this.error,this.inputHTML.classList.remove("border-error")}}},{key:"isValid",value:function(){return this.valid}},{key:"inputListener",value:function(t){var e,r=Fe[this.input.name],n=this.inputHTML.value;if((n.length<r.minLength||n.length>r.maxLength)&&(e=r.errorMessages.length),r.containsLetter&&!r.containsLetter(n)&&(e=r.errorMessages.containsLetter),r.containsValidChars&&!r.containsValidChars(n)&&(e=r.errorMessages.containsValidChars),r.match){if("passwordRepeat"===this.input.name){var o=this.form.querySelector('[name="password"]').value;o&&!r.match(n,o)&&(e=r.errorMessages.match)}"passwordRepeat"===this.input.name||r.match(n)||(e=r.errorMessages.match)}if(e)this.setState(!1,e);else if(this.setState(!0,null),t.isTrusted)if("password"===this.input.name){var i=this.form.querySelector('[name="passwordRepeat"]');i&&i.dispatchEvent(new Event("input"))}else if("passwordRepeat"===this.input.name){var a=this.form.querySelector('[name="password"]');a&&a.dispatchEvent(new Event("input"))}}}])}(),Ye={inputs:[{type:"text",text:"Введите логин:",name:"username",errorName:"username-error",placeholder:"логин"},{type:"email",text:"Введите email:",name:"email",errorName:"email-error",placeholder:"email"},{type:"password",text:"Введите пароль:",name:"password",errorName:"password-error",placeholder:"пароль"},{type:"password",text:"Повторите пароль:",name:"passwordRepeat",errorName:"passwordRepeat-error",placeholder:"пароль"}],submitText:"Зарегистрироваться",header:"Регистрация"},Ve={inputs:[{type:"text",text:"Введите логин/email:",name:"identifier",errorName:"identifier-error",placeholder:"логин/email"},{type:"password",text:"Введите пароль:",name:"password",errorName:"password-error",placeholder:"пароль"}],submitText:"Войти",header:"Авторизация"};function ze(t){var e=document.querySelector('[name="global-error"]');e&&(e.textContent=t,e.className="error-message")}function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Xe(){Xe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Je(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Je(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function $e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rr(n.key),n)}}function We(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(We=function(){return!!t})()}function Ze(t){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze(t)}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}function er(t,e,r){return(e=rr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rr(t){var e=function(t){if("object"!=Je(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Je(e)?e:e+""}var nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Ze(e),function(t,e){if(e&&("object"==Je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,We()?Reflect.construct(e,r||[],Ze(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(e,t),function(t,e){return e&&Ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(t){this.authType=t,this.element.id="auth-form",this.element.classList.add("auth-form")}},{key:"build",value:function(){var t=this;this.element.innerHTML="";var r=this.getContent();this.element.insertAdjacentHTML("beforeend",e.template(r)),this.element.addEventListener("mousedown",(function(t){"auth-form"===t.target.id&&f.pushUrl(f.getPath(),{})}));var n=[];r.inputs.forEach((function(e){if(e){var r=new Qe(t.element,e,"login"===t.authType);n.push(r)}})),this.element.addEventListener("submit",(function(e){e.preventDefault();var r=!1,o={};n.forEach((function(t){t.isValid()||(r=!0),o[t.input.name]=t.inputHTML.value})),r||(o.identifier&&o.identifier.includes("@")&&(o.email=o.identifier,delete o.identifier),o.identifier&&!o.identifier.includes("@")&&(o.username=o.identifier,delete o.identifier),ze(""),t.sendData(o))}))}},{key:"getContent",value:function(){switch(this.authType){case"login":return Ve;case"register":return Ye}}},{key:"sendData",value:function(t){var e,r=this;(e=Xe().mark((function e(){var n,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"register"!==r.authType){e.next=13;break}return e.prev=2,e.next=5,B.postSignup(t);case 5:n=e.sent,q.setState(n.body),f.pushUrl(f.getPath(),{}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),ze(e.t0.message);case 13:if("login"!==r.authType){e.next=25;break}return e.prev=14,e.next=17,B.postLogin(t);case 17:o=e.sent,q.setState(o.body),f.pushUrl(f.getPath(),{}),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(14),ze(e.t1.message);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(0),ze("Ошибка сети, попробуйте позже");case 30:case"end":return e.stop()}}),e,null,[[0,27],[2,10],[14,22]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){$e(i,n,o,a,u,"next",t)}function u(t){$e(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}])}(S);function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(){ir=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==or(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(or(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ar(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fr(n.key),n)}}function cr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cr=function(){return!!t})()}function lr(t){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lr(t)}function sr(t,e){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sr(t,e)}function fr(t){var e=function(t){if("object"!=or(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==or(e)?e:e+""}er(nr,"BASE_ELEMENT","form"),er(nr,"template",Handlebars.templates["auth.hbs"]),r(13),r(202),Handlebars.registerPartial("artist-card",Handlebars.templates["artist-card.hbs"]),r(986),Handlebars.registerPartial("artists-section",Handlebars.templates["artists_section.hbs"]);var pr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=lr(e),function(t,e){if(e&&("object"==or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cr()?Reflect.construct(e,r||[],lr(t).constructor):e.apply(t,r))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(e,t),function(t,e){return e&&ur(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("page","page--artists")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=ir().mark((function t(){var n,o;return ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getArtists();case 3:n=t.sent.body,o={loved:n,recommendations:n},r.element.insertAdjacentHTML("beforeend",e.template(o)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ar(i,n,o,a,u,"next",t)}function u(t){ar(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}])}(S);function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function yr(){yr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==hr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(hr(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function dr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wr(n.key),n)}}function mr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mr=function(){return!!t})()}function br(t){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},br(t)}function gr(t,e){return gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gr(t,e)}function wr(t){var e=function(t){if("object"!=hr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hr(e)?e:e+""}!function(t,e,r){(e=fr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(pr,"template",Handlebars.templates["artists.hbs"]),r(481);var _r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=br(e),function(t,e){if(e&&("object"==hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mr()?Reflect.construct(e,r||[],br(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gr(t,e)}(e,t),function(t,e){return e&&vr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(t){this.id=t,this.element.classList.add("page","page--artist")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=yr().mark((function t(){var n,o,i,a;return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={listeners:0},t.next=3,B.getArtist(r.id);case 3:return o=t.sent.body,t.next=6,B.getArtistAlbums(r.id);case 6:return i=t.sent.body,t.next=9,B.getArtistTracks(r.id);case 9:a=t.sent.body,r.element.insertAdjacentHTML("beforeend",e.template({artist:o,albums:i,tracks:a,stats:n}));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dr(i,n,o,a,u,"next",t)}function u(t){dr(i,n,o,a,u,"throw",t)}a(void 0)}))})()}},{key:"render",value:function(t,e,r){}}])}(S);function kr(t){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(t)}function xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Or(n.key),n)}}function Or(t){var e=function(t){if("object"!=kr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kr(e)?e:e+""}function Er(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Er=function(){return!!t})()}function Pr(){return Pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Lr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Pr.apply(null,arguments)}function Lr(t){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lr(t)}function jr(t,e){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jr(t,e)}!function(t,e,r){(e=wr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(_r,"template",Handlebars.templates["artist.hbs"]);var Sr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Lr(e),function(t,e){if(e&&("object"==kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Er()?Reflect.construct(e,r||[],Lr(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jr(t,e)}(e,t),function(t,e){return e&&xr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("layout","layout--artists"),this.page=this.createState(null),f.addCallback(H.artistsRoute,this)}},{key:"build",value:function(){f.callCallback(H.artistsRoute,this)}},{key:"render",value:function(t,e,r){t===this.page&&(e&&e.destroy(),r&&this.element.appendChild(r.element))}},{key:"destroy",value:function(){!function(t,e,r){var n=Pr(Lr(t.prototype),"destroy",r);return"function"==typeof n?function(t){return n.apply(r,t)}:n}(e,0,this)([]),f.removeCallback(H.artistsRoute,this)}},{key:"onRoute",value:function(t){var e=t.route,r=t.params;switch(e){case H.artistsRoute:if(r[1]){var n=parseInt(r[1]);this.page.setState(new _r(n));break}this.page.setState(new pr)}}}])}(S);function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function Hr(){Hr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Tr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Tr(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Cr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mr(n.key),n)}}function Rr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rr=function(){return!!t})()}function Ar(t){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ar(t)}function Gr(t,e){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gr(t,e)}function Mr(t){var e=function(t){if("object"!=Tr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tr(e)?e:e+""}r(561);var Dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Ar(e),function(t,e){if(e&&("object"==Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rr()?Reflect.construct(e,r||[],Ar(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gr(t,e)}(e,t),function(t,e){return e&&Nr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(t){this.username=t||q.getState().username,this.element.classList.add("page","page--profile")}},{key:"build",value:function(){var t,r=this;this.element.innerHTML="",(t=Hr().mark((function t(){var n,o,i,a;return Hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getUser(r.username);case 3:r.user=t.sent.body,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:return n={minutes:0,tracks:0,artists:0},t.next=12,B.getAlbums();case 12:return o=t.sent.body,t.next=15,B.getTracks();case 15:return i=t.sent.body,t.next=18,B.getArtists();case 18:a=t.sent.body,r.element.insertAdjacentHTML("beforeend",e.template({user:r.user,stats:n,playlists:o,tracks:i,artists:a}));case 20:case"end":return t.stop()}}),t,null,[[0,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cr(i,n,o,a,u,"next",t)}function u(t){Cr(i,n,o,a,u,"throw",t)}a(void 0)}))})()}},{key:"render",value:function(t,e,r){}}])}(S);function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Fr(){Fr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ir(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ir(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Br(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function qr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Br(i,n,o,a,u,"next",t)}function u(t){Br(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zr(n.key),n)}}function Qr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qr=function(){return!!t})()}function Yr(t){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yr(t)}function Vr(t,e){return Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vr(t,e)}function zr(t){var e=function(t){if("object"!=Ir(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ir(e)?e:e+""}!function(t,e,r){(e=Mr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Dr,"template",Handlebars.templates["profile.hbs"]),r(602);var Jr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=Yr(e),function(t,e){if(e&&("object"==Ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qr()?Reflect.construct(e,r||[],Yr(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vr(t,e)}(e,t),function(t,e){return e&&Ur(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){var t,e=this;this.element.classList.add("page","page--settings"),this.username=null===(t=q.getState())||void 0===t?void 0:t.username,this.avatar=this.createState(null),this.createCallback(q,(function(){var t;e.username=null===(t=q.getState())||void 0===t?void 0:t.username,e.build()}))}},{key:"build",value:function(){var t=this;this.element.innerHTML="",this.username&&qr(Fr().mark((function r(){return Fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.getUser(t.username);case 3:t.user=r.sent.body,t.user.email=q.getState().email,t.element.insertAdjacentHTML("beforeend",e.template({user:t.user})),t.avatar.setState(t.user.avatar_url),t.element.querySelector("#avatar").addEventListener("change",t.handleAvatar.bind(t)),t.element.querySelector(".page--settings__bottom__button-save").addEventListener("click",t.handleSubmit.bind(t)),t.element.querySelector(".page--settings__bottom__button-reject").addEventListener("click",t.handleDelete.bind(t)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.error(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()}},{key:"render",value:function(t,e,r){t===this.avatar&&(this.element.querySelector(".page--settings__top__avatar img").src=this.avatar.getState())}},{key:"handleAvatar",value:function(){var t=this.element.querySelector("#avatar").files[0];this.avatar.setState(URL.createObjectURL(t))}},{key:"handleSubmit",value:function(){var t=this,e=new FormData;e.append("username",this.user.username),e.append("avatar",this.element.querySelector("#avatar").files[0]),qr(Fr().mark((function r(){return Fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.updateAvatar(t.user.username,e);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),console.error("Failed to update avatar:",r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))();var r={username:this.user.username,email:this.user.email,password:this.element.querySelector('input[name="password"]').value||void 0,new_username:this.element.querySelector('input[name="new-username"]').value||void 0,new_email:this.element.querySelector('input[name="new-email"]').value||void 0,new_password:this.element.querySelector('input[name="new-password"]').value||void 0,is_public_playlists:"true"===this.element.querySelector('input[name="public-playlists"]:checked').value,is_public_favorite_tracks:"true"===this.element.querySelector('input[name="public-tracks"]:checked').value,is_public_favorite_artists:"true"===this.element.querySelector('input[name="public-artists"]:checked').value,is_public_minutes_listened:"true"===this.element.querySelector('input[name="public-minutes-listened"]:checked').value,is_public_tracks_listened:"true"===this.element.querySelector('input[name="public-tracks-listened"]:checked').value,is_public_artists_listened:"true"===this.element.querySelector('input[name="public-artists-listened"]:checked').value};qr(Fr().mark((function e(){var n;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.updateUser(t.user.username,r);case 3:n=e.sent.body,q.setState(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to update user:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},{key:"handleDelete",value:function(){console.error("DELETE ACCOUNT")}}])}(S);function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kr(n.key),n)}}function Kr(t){var e=function(t){if("object"!=Xr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xr(e)?e:e+""}function Wr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wr=function(){return!!t})()}function Zr(){return Zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Zr.apply(null,arguments)}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}function en(t,e){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},en(t,e)}!function(t,e,r){(e=zr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Jr,"template",Handlebars.templates["settings.hbs"]);var rn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=tn(e),function(t,e){if(e&&("object"==Xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wr()?Reflect.construct(e,r||[],tn(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&en(t,e)}(e,t),function(t,e){return e&&$r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("layout","layout--profile"),this.page=this.createState(null),f.addCallback(H.profileRoute,this)}},{key:"build",value:function(){f.callCallback(H.profileRoute,this)}},{key:"render",value:function(t,e,r){t===this.page&&(e&&e.destroy(),r&&this.element.appendChild(r.element))}},{key:"destroy",value:function(){!function(t,e,r){var n=Zr(tn(t.prototype),"destroy",r);return"function"==typeof n?function(t){return n.apply(r,t)}:n}(e,0,this)([]),f.removeCallback(H.profileRoute,this)}},{key:"onRoute",value:function(t){var e=t.route,r=t.params;e===H.profileRoute&&("settings"===r[1]?this.page.setState(new Jr):this.page.setState(new Dr(r[1])))}}])}(S);function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(){on=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==nn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(nn(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function an(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cn(n.key),n)}}function cn(t){var e=function(t){if("object"!=nn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nn(e)?e:e+""}function ln(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ln=function(){return!!t})()}function sn(){return sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=fn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},sn.apply(null,arguments)}function fn(t){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fn(t)}function pn(t,e){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pn(t,e)}var hn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=fn(e),function(t,e){if(e&&("object"==nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ln()?Reflect.construct(e,r||[],fn(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}(e,t),function(t,e){return e&&un(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.element.classList.add("main-layout"),this.child=this.createState(null),this.popup=this.createState(null),f.addCallback(H.pageRoute,this),f.addCallback(H.authRoute,this),f.addCallback(H.logoutRoute,this)}},{key:"build",value:function(){this.header=new K,this.playlists=new it,this.bottomPlayer=Zt,this.element.appendChild(this.header.element),this.element.appendChild(this.playlists.element),this.element.appendChild(this.bottomPlayer.element),f.callCallback(H.pageRoute,this),f.callCallback(H.authRoute,this),f.callCallback(H.logoutRoute,this)}},{key:"render",value:function(t,e,r){switch(t){case this.child:e&&e.element.remove(),this.element.appendChild(r.element);break;case this.popup:e&&e.destroy(),r&&this.element.appendChild(r.element)}}},{key:"destroy",value:function(){!function(t,e,r){var n=sn(fn(t.prototype),"destroy",r);return"function"==typeof n?function(t){return n.apply(r,t)}:n}(e,0,this)([]),f.removeCallback(H.pageRoute,this),f.removeCallback(H.authRoute,this),f.removeCallback(H.logoutRoute,this)}},{key:"onRoute",value:function(t){var e,r=t.route,n=t.params;switch(r){case H.authRoute:switch(n[1]){case"login":this.popup.setState(new nr("login"));break;case"register":this.popup.setState(new nr("register"));break;default:this.popup.setState(null)}break;case H.pageRoute:switch(n[1]){case"":this.child.setState(new ce);break;case"tracks":this.child.setState(new me);break;case"albums":this.child.setState(new Pe);break;case"artists":this.child.setState(new Sr);break;case"profile":this.child.setState(new rn)}break;case H.logoutRoute:if(""===n[0])break;(e=on().mark((function t(){return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.postLogout();case 3:q.setState(null),f.pushUrl("/",{}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){an(i,n,o,a,u,"next",t)}function u(t){an(i,n,o,a,u,"throw",t)}a(void 0)}))})()}}}])}(S);function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function dn(){dn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:P(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(H([])));k&&k!==r&&n.call(k,a)&&(w=k);var x=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==yn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yn(e)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function vn(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function mn(){var t;return t=dn().mark((function t(e){var r,n,o,i,a,u,c,l,s,f;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.getAttribute("data-track-id"),n=e.closest(".section"),o=[],i=Array.from(n.querySelectorAll('[data-type="track"]')),a=0,u=0,c=0,l=i;c<l.length;c++)s=l[c],f=s.getAttribute("data-track-id"),o.push(f),f===r&&(u=a),a++;kt.clearQueue(),kt.addTrack(o,u);case 9:case"end":return t.stop()}}),t)})),mn=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vn(i,n,o,a,u,"next",t)}function u(t){vn(i,n,o,a,u,"throw",t)}a(void 0)}))},mn.apply(this,arguments)}function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wn(n.key),n)}}function wn(t){var e=function(t){if("object"!=bn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bn(e)?e:e+""}function _n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_n=function(){return!!t})()}function kn(t){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kn(t)}function xn(t,e){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xn(t,e)}var On=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){return e=kn(e),function(t,e){if(e&&("object"==bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_n()?Reflect.construct(e,r||[],kn(t).constructor):e.apply(t,r))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xn(t,e)}(e,t),function(t,e){return e&&gn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){console.log("App init"),this.initEventListeners()}},{key:"build",value:function(){this.element.appendChild((new hn).element)}},{key:"initEventListeners",value:function(){var t=this;this.element.addEventListener("click",(function(t){var e=t.target;if(e instanceof HTMLAnchorElement){if(t.preventDefault(),"not-allowed"==e.style.cursor)return;f.pushUrl(e.href,{})}if(e instanceof HTMLElement&&"track"===e.closest("div").dataset.type){var r=e.closest("div"),n=kt.getCurrentTrackId();n&&r.getAttribute("data-track-id")===n?ht.togglePlay():function(t){mn.apply(this,arguments)}(r)}})),setInterval((function(){for(var e=Array.from(t.element.querySelectorAll('[data-type="track"]')),r=kt.getCurrentTrackId(),n=0,o=e;n<o.length;n++){var i,a,u=o[n],c=null!==(i=u.querySelector(".track__img"))&&void 0!==i?i:u.querySelector(".music-card__img"),l=null!==(a=u.querySelector(".track__play"))&&void 0!==a?a:u.querySelector(".music-card__play");r&&u.getAttribute("data-id")===r?(c.classList.add("track-active"),l.classList.add("track-icon-active"),ht.audio.paused?l.src="/static/img/player-play.svg":l.src="/static/img/player-pause.svg",Zt.setPlayButtonState()):(c.classList.remove("track-active"),l.classList.remove("track-icon-active"),l.src="/static/img/player-play.svg")}}),300)}}])}(T);new On})()})();